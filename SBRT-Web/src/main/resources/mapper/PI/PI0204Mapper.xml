<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.tracom.bms.domain.PI0204.PI0204Mapper">

	<select id="PI0204G0R0" resultType="Map" parameterType="Map">
		SELECT
			  VOC_ID
			, SCR_TXT
		    , VOC_NM
		    , PLAY_TYPE
		    , KR_TTS
		    , EN_TTS
		    , REMARK
		    , PLAY_TM
		    , VOC_DIV
		FROM
			BMS_VOC_INFO
		WHERE
			VOC_DIV = 'VD005'	
		<where>
			<if test="CONTENT != ''">
				VOC_ID LIKE CONCAT('%',#{CONTENT},'%') OR VOC_NM LIKE CONCAT('%',#{CONTENT},'%')
			</if>
		</where>
		LIMIT 9
		<!-- SELECT 
			VOC_ID, 
			VOC_NM, DATE_FORMAT(PLAY_ST_DT, '%Y%m%d') PLAY_ST_DT, PLAY_TYPE, KR_TTS, EN_TTS, 
		SCR_TXT, SCR_TXT_EN, REMARK, PLAY_TM, VOC_DIV, CON_ID, DATE_FORMAT(PLAY_ED_DT, '%Y%m%d') PLAY_ED_DT, DATE_FORMAT(UPD_DTM, '%Y%m%d%H%i') UPD_DTM, 
		UPD_ID, CONCAT(DATE_FORMAT(PLAY_ST_DT, '%Y%m%d'), DATE_FORMAT(PLAY_ED_DT, '%Y%m%d')) PLAY_DATE 
		FROM BMS_VOC_INFO
		<where>
			<if test="CONTENT != ''">
				VOC_ID LIKE CONCAT('%',#{CONTENT},'%') OR VOC_NM LIKE CONCAT('%',#{CONTENT},'%')
			</if>
		</where> -->
		
	</select>
	
	<update id="PI0204G0U0" parameterType="Map" >
		UPDATE BMS_VOC_INFO
    	SET
    		  VOC_NM		=	#{VOC_NM}
    		, SCR_TXT		= 	left(replace(replace(#{SCR_TXT}, " ", ""), ",", ""), 4)
    		, PLAY_TYPE		=	#{PLAY_TYPE}
    		, SCR_TXT		=	#{SCR_TXT}
    		, REMARK		=	#{REMARK}
    		, PLAY_TM		=	#{PLAY_TM}
    		, UPD_DTM		=	#{UPD_DTM}
    	WHERE
    		VOC_ID = #{VOC_ID}
    		AND
    		VOC_DIV = 'CD029'
	</update>
	
	<delete id="PI0204G0D0" parameterType="Map">
		UPDATE BMS_VOC_INFO
    	SET
    		  VOC_NM		=	NULL
    		, SCR_TXT		=	NULL
    		, PLAY_TYPE		=	NULL
    		, KR_TTS		=	NULL
    		, PLAY_TM		=	NULL
    		, REMARK		=	NULL
    		, UPD_DTM		=	#{UPD_DTM}
    	WHERE
    		VOC_ID = #{VOC_ID}
    		AND
    		VOC_DIV = 'CD029'
	</delete>
	
	<!-- 
	<select id="PI0201G0K0" resultType="Map">
		SELECT CONCAT('VC', LPAD(NEXTVAL(SEQ_BMS_VOC_INFO_0), 8, '0')) AS 'SEQ'
	</select>	

	<insert id="PI0201G0I0" parameterType="Map">	
	INSERT INTO BMS_VOC_INFO(VOC_ID, ROUT_ID, VOC_NM, PLAY_ST_DT, PLAY_TYPE, KR_TTS, EN_TTS, SCR_TXT, 	SCR_TXT_EN, REMARK, PLAY_TM, 
	VOC_DIV, CON_ID, PLAY_ED_DT,  STTN_TEXT_A, STTN_TEXT_A_EN, STTN_TEXT_B, STTN_TEXT_B_EN, UPD_DTM, UPD_ID) 
	VALUES (#{VOC_ID}, #{ROUT_ID}, #{VOC_NM}, STR_TO_DATE(#{PLAY_ST_DT}, '%Y%m%d'), #{PLAY_TYPE}, #{KR_TTS}, #{EN_TTS}, 
	#{SCR_TXT}, #{SCR_TXT_EN}, #{REMARK}, #{PLAY_TM}, #{VOC_DIV}, #{CON_ID}, STR_TO_DATE(#{PLAY_ED_DT}, '%Y%m%d'), #{STTN_TEXT_A}, 
	#{STTN_TEXT_A_EN}, #{STTN_TEXT_B}, #{STTN_TEXT_B_EN}, #{UPD_DTM}, #{UPD_ID}
	</insert>

	<delete id="PI0201G0D0" parameterType="Map">
		DELETE FROM BMS_VOC_INFO WHERE VOC_ID = #{VOC_ID};
	</delete>
	
	<update id="PI0201G0U0" parameterType="Map">
		UPDATE BMS_VOC_INFO SET ROUT_ID = #{ROUT_ID}, VOC_NM = #{VOC_NM}, PLAY_ST_DT = STR_TO_DATE(#{PLAY_ST_DT}, '%Y%m%d'), 
		PLAY_TYPE = #{PLAY_TYPE}, KR_TTS = #{KR_TTS}, EN_TTS = #{EN_TTS}, SCR_TXT = #{SCR_TXT}, SCR_TXT_EN = #{SCR_TXT_EN}, 
		REMARK = #{REMARK}, PLAY_TM = #{PLAY_TM}, VOC_DIV = #{VOC_DIV}, CON_ID = #{CON_ID},PLAY_ED_DT = STR_TO_DATE(#{PLAY_ED_DT}, '%Y%m%d'), 
		STTN_TEXT_A = #{STTN_TEXT_A}, STTN_TEXT_A_EN = #{STTN_TEXT_A_EN}, STTN_TEXT_B = #{STTN_TEXT_B}, STTN_TEXT_B_EN = #{STTN_TEXT_B_EN}, 
		UPD_DTM = #{UPD_DTM}, UPD_ID = #{UPD_ID} WHERE VOC_ID = #{VOC_ID}
	</update> -->
	
</mapper>