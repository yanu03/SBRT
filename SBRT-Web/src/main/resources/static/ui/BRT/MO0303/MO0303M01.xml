<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare"
	xmlns:xf="http://www.w3.org/2002/xforms">
	<head meta_vertical_guides="" meta_horizontal_guides="">
		<w2:type>DEFAULT</w2:type>
		<w2:buildDate />
		<xf:model>
			<xf:instance>
				<data xmlns="" />
			</xf:instance>
			<w2:dataCollection baseNode="map">
				<w2:dataMap baseNode="map" id="dma_search">
					<w2:keyInfo>
						<w2:key id="TYPE" name="name1" dataType="text"></w2:key>
						<w2:key id="CONTENT" name="name2" dataType="text"></w2:key>
						<w2:key id="USE_YN" name="name3" dataType="text"></w2:key>
						<w2:key id="F_DATE" name="name4" dataType="text"></w2:key>
						<w2:key id="L_DATE" name="name5" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
				<w2:dataMap baseNode="map" id="dma_result">
					<w2:keyInfo>
						<w2:key id="STATUS" name="STATUS" dataType="text"></w2:key>
						<w2:key id="ICNT" name="입력건수" dataType="text"></w2:key>
						<w2:key id="UCNT" name="수정건수" dataType="text"></w2:key>
						<w2:key id="DCNT" name="삭제건수" dataType="text"></w2:key>
						<w2:key id="TYPE" name="TYPE" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
				<w2:dataList baseNode="list" repeatNode="map" id="dlt_searchitem" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="VHC_NO" name="차량번호" dataType="text"></w2:column>
						<w2:column id="INCDNT_ID" name="돌발ID" dataType="text"></w2:column>
					</w2:columnInfo>
				</w2:dataList>
				<w2:dataMap baseNode="map" id="dma_subsearch">
					<w2:keyInfo>
						<w2:key id="OPER_DT" name="운행일" dataType="date"></w2:key>
						<w2:key id="REP_ROUT_ID" name="대표노선아이디" dataType="text"></w2:key>
						<w2:key id="VHC_ID" name="차량아이디" dataType="text"></w2:key>
						<w2:key id="INCDNT_TYPE" name="돌발유형" dataType="text"></w2:key>

						<w2:key id="ROUT_ID" name="노선아이디" dataType="text"></w2:key>
						<w2:key id="OCR_DTM" name="발생일시" dataType="date"></w2:key>
						<w2:key id="COR_ID" name="name7" dataType="text"></w2:key>
						<w2:key id="ROUT_NM" name="name8" dataType="text"></w2:key>
						<w2:key id="LINK_ID" name="name9" dataType="text"></w2:key>
						<w2:key id="NODE_ID" name="name10" dataType="text"></w2:key>
						<w2:key id="INCDNT_ID" name="돌발ID" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
				<w2:dataList baseNode="list" repeatNode="map" id="dlt_BRT_INCDNT_INFO" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="INCDNT_ID" name="돌발ID" dataType="text"></w2:column>
						<w2:column id="OPER_DT" name="운행일" dataType="date"></w2:column>
						<w2:column id="REP_ROUT_ID" name="대표노선아이디" dataType="text"></w2:column>
						<w2:column id="VHC_ID" name="차량아이디" dataType="text"></w2:column>
						<w2:column id="INCDNT_TYPE" name="돌발유형" dataType="text"></w2:column>
						<w2:column id="ROUT_ID" name="노선아이디" dataType="text"></w2:column>
						<w2:column id="ALLOC_NO" name="배차번호" dataType="text"></w2:column>
						<w2:column id="INCDNT_DETAIL" name="돌발상세내역" dataType="text"></w2:column>
						<w2:column id="OPER_SN" name="운행순번" dataType="text"></w2:column>
						<w2:column id="COR_ID" name="코스아이디" dataType="text"></w2:column>
						<w2:column id="OCR_DTM" name="발생일시" dataType="date"></w2:column>
						<w2:column id="VHC_NO" name="차량번호" dataType="text"></w2:column>
						<w2:column id="DRV_ID" name="운전자아이디" dataType="text"></w2:column>
						<w2:column id="REP_ROUT_NM" name="대표노선명" dataType="text"></w2:column>
						<w2:column id="ROUT_NM" name="노선명" dataType="text"></w2:column>
						<w2:column id="LINK_ID" name="링크아이디" dataType="text"></w2:column>
						<w2:column id="NODE_ID" name="노드아이디" dataType="text"></w2:column>
						<w2:column id="GPS_X" name="돌발GPS_X좌표" dataType="text"></w2:column>
						<w2:column id="GPS_Y" name="돌발GPS_Y좌표" dataType="text"></w2:column>
						<w2:column id="TM_X" name="돌발TM_X좌표" dataType="text"></w2:column>
						<w2:column id="TM_Y" name="돌발TM_Y좌표" dataType="text"></w2:column>
						<w2:column id="REMARK" name="비고" dataType="text"></w2:column>
						<w2:column id="UPD_DTM" name="갱신일시" dataType="text"></w2:column>
						<w2:column id="COR_NM" name="코스명" dataType="text"></w2:column>
						<w2:column id="DRV_NM" name="운전자명" dataType="text"></w2:column>
						<w2:column id="LINK_NM" name="링크명" dataType="text"></w2:column>
						<w2:column id="NODE_NM" name="노드명" dataType="text"></w2:column>
						<w2:column id="OLD_OPER_DT" name="name19" dataType="text"></w2:column>
						<w2:column id="OLD_REP_ROUT_ID" name="name20" dataType="text"></w2:column>
						<w2:column id="OLD_VHC_ID" name="name21" dataType="text"></w2:column>
						<w2:column id="OLD_INCDNT_TYPE" name="name22" dataType="text"></w2:column>
						<w2:column id="OLD_ROUT_ID" name="name23" dataType="text"></w2:column>
						<w2:column id="OLD_OCR_DTM" name="name32" dataType="text"></w2:column>
						<w2:column id="INCDNT_RES_YN" name="돌발 대응여부" dataType="text"></w2:column>
					</w2:columnInfo>
				</w2:dataList>
				<w2:dataList baseNode="list" repeatNode="map" id="dlt_BRT_INCDNT_RES_INFO" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="INCDNT_RES_ID" name="돌발대응ID" dataType="text"></w2:column>
						<w2:column id="OPER_DT" name="운행일" dataType="text"></w2:column>
						<w2:column id="REP_ROUT_ID" name="대표노선아이디" dataType="text"></w2:column>
						<w2:column id="VHC_ID" name="차량아이디" dataType="text"></w2:column>
						<w2:column id="INCDNT_TYPE" name="돌발유형" dataType="text"></w2:column>
						<w2:column id="ROUT_ID" name="노선아이디" dataType="text"></w2:column>
						<w2:column id="COR_ID" name="코스아이디" dataType="text"></w2:column>
						<w2:column id="CLOSE_DTM" name="종료일시" dataType="text"></w2:column>
						<w2:column id="GRP_ROUT_NM" name="대표노선명" dataType="text"></w2:column>
						<w2:column id="ROUT_NM" name="노선명" dataType="text"></w2:column>
						<w2:column id="VHC_NO" name="차량번호" dataType="text"></w2:column>
						<w2:column id="LINK_ID" name="링크아이디" dataType="text"></w2:column>
						<w2:column id="NODE_ID" name="노드아이디" dataType="text"></w2:column>
						<w2:column id="INCDNT_RES_TYPE" name="돌발대응유형" dataType="text"></w2:column>
						<w2:column id="REMARK" name="돌발대응내용" dataType="text"></w2:column>
						<w2:column id="PROG_DIV" name="진행구분" dataType="text"></w2:column>
						<w2:column id="CLSFCTN_ID" name="name16" dataType="text"></w2:column>
						<w2:column id="CLSFCTN_NM" name="name17" dataType="text"></w2:column>
						<w2:column id="PHONE" name="name18" dataType="text"></w2:column>
						<w2:column id="INCDNT_ID" name="돌발ID" dataType="text"></w2:column>
					</w2:columnInfo>
				</w2:dataList>
				<w2:dataMap baseNode="map" id="dma_SEQ_BRT_INCDNT_INFO_0">
					<w2:keyInfo>
						<w2:key id="SEQ" name="SEQ" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
				<w2:dataMap baseNode="map" id="dma_SEQ_BRT_INCDNT_RES_INFO_0">
					<w2:keyInfo>
						<w2:key id="SEQ" name="SEQ" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
			</w2:dataCollection>
			<w2:workflowCollection></w2:workflowCollection>
			<xf:submission id="sub_MO0303G0R0" ref="data:json,dma_search" target="data:json,dlt_BRT_INCDNT_INFO" action="/mo/MO0303G0R0"
				method="post" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
				processMsg="조회 중입니다..." ev:submit="" ev:submitdone="scwin.sub_MO0303G0R0_submitdone" ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_MO0303G0S0" ref='data:json,{"action":"modified","id":"dlt_BRT_INCDNT_INFO"}'
				target="data:json,dma_result" action="/mo/MO0303G0S0" method="post" mediatype="application/json" encoding="UTF-8" instance="" replace=""
				errorHandler="" customHandler="" mode="asynchronous" processMsg="저장 중입니다..." ev:submit=""
				ev:submitdone="scwin.sub_MO0303G0S0_submitdone" ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_MO0303SHI0" ref="" target="data:json,dlt_searchitem" action="/mo/MO0303SHI0" method="post"
				mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg=""
				ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_MO0303G1R0" ref="data:json,dma_subsearch" target="data:json,dlt_BRT_INCDNT_RES_INFO"
				action="/mo/MO0303G1R0" method="post" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler=""
				customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="scwin.sub_MO0303G1R0_submitdone" ev:submiterror=""
				abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_MO0303G1S0" ref='data:json,{"action":"modified","id":"dlt_BRT_INCDNT_RES_INFO"}'
				target="data:json,dma_result" action="/mo/MO0303G1S0" method="post" mediatype="application/json" encoding="UTF-8" instance="" replace=""
				errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="scwin.sub_MO0303G1S0_submitdone"
				ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_MO0303G0K0" ref="" target="data:json,dma_SEQ_BRT_INCDNT_INFO_0" action="/mo/MO0303G0K0" method="post"
				mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg=""
				ev:submit="" ev:submitdone="scwin.sub_MO0303G0K0_submitdone" ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_MO0303G1K0" ref="" target="data:json,dma_SEQ_BRT_INCDNT_RES_INFO_0" action="/mo/MO0303G1K0" method="post" mediatype="application/json" encoding="UTF-8"
				instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="scwin.sub_MO0303G1K0_submitdone"
				ev:submiterror="" abortTrigger="">
			</xf:submission>
		</xf:model>
		<script type="text/javascript" lazy="false"><![CDATA[
        
	scwin.onpageload = function() {
		var autoOptions = {
			Main : { grid : MO0303G0, frm : MO0303F0, srchSbm : sub_MO0303G0R0, savSbm : sub_MO0303G0S0, keySbm : sub_MO0303G0K0
					, srchGrp : pgm_header, keyColumn : "INCDNT_ID", focusColumn : "OPER_DT", name :  "돌발상황 목록"},
			Sub1 : { grid : MO0303G1, srchSbm : sub_MO0303G1R0, keySbm : sub_MO0303G1K0, savSbm : sub_MO0303G1S0, keyColumn : "INCDNT_RES_ID" ,name :  "대응 목록"}
		 };		
		 
		var mainOptions = {
			//PLAY : scwin.btn_play_onclick
			PLAY : {cbFnc:scwin.btn_play_onclick, nm:"돌발 메시지 전송", class:"share"}
		};
		 
		com.setMainBtn2(wfm_mainBtn, gcm.DISP_TYPE.DUAL_GRID_FORM, autoOptions, mainOptions);		 
		var date = new Date();
		var year = date.getFullYear().toString();
		
		//3월이면 03
		var month = ("0" + (date.getMonth()+1)).slice(-2).toString();
		var day = ("0" + (date.getDate())).slice(-2).toString();
		
		var today = year+month+day;
		var firstday = year+month+"01";
		F_DATE.setValue(firstday);
		L_DATE.setValue(today);	
		var codeOptions = [ {code : "INCDNT_TYPE", compID : "MO0303G0:INCDNT_TYPE, INCDNT_TYPE" },
							{code : "INCDNT_RES_TYPE", compID : "MO0303G1:INCDNT_RES_TYPE, INCDNT_RES_TYPE"},
							{code : "PROG_DIV", compID : "MO0303G1:PROG_DIV, PROG_DIV"}
		 ];	
			 
		com.setCommonDtl(codeOptions, function() {
			com.searchGrid(MO0303G0, sub_MO0303G0R0);
		});	

		var subOptions = { 
            ADD: scwin.btn_add2_onclick, DEL:{}, CNL:{}
		};		
		
      	com.setSubBtn2(wfm_subBtn, autoOptions, subOptions);
      	
		var subOptions2 = {
        	SAVE:[{cbFnc:scwin.btn_scnro_onclick, nm:"시나리오 불러오기",class:"add"}
        	//	 ,{cbFnc:scwin.btn_incdntResMessage_onclick, nm:"돌발대응 메시지 전송",class:"share"}
               ]
           };
      	com.setSubBtn2(wfm_subBtn2, autoOptions, subOptions2);
               
               
		var subOptions3 = {
//        	SAVE:[{cbFnc:scwin.btn_incdntMessage_onclick,nm:"돌발상황 메시지 전송",class:"share"} 
//               ]
		};
		com.setSubBtn2(wfm_subBtn3, autoOptions, subOptions3);
	
		com.executeSubmission(sub_MO0303SHI0);		 
		com.executeSubmission(sub_MO0303G1R0);		 
	};
	
	scwin.onpageunload = function() {

	};	
	

	scwin.sub_MO0303G0R0_submitdone = function(e) {
		for (i=0; i<dlt_BRT_INCDNT_INFO.getDataLength(); i++) {
			//비정상
			if (dlt_BRT_INCDNT_INFO.getCellData(i, "INCDNT_RES_YN") == "돌발 미대응") {
				MO0303G0.setCellClass(i, "INCDNT_RES_YN", "cond_abnormal");
			}
			//정상
			else if (dlt_BRT_INCDNT_INFO.getCellData(i, "INCDNT_RES_YN") == "돌발 대응") {
				MO0303G0.setCellClass(i, "INCDNT_RES_YN", "cond_normal");
			}
		}
				
		com.setFocusedCell(MO0303G0, "OPER_DT");		
	};
	
	scwin.sub_MO0303G0S0_submitdone = function(e) {
		com.saveDone(MO0303G0, sub_MO0303G0R0);
	};
	
	scwin.MO0303G0_onrowindexchange = function(row,oldRow) {
		dma_subsearch.set("INCDNT_ID", dlt_BRT_INCDNT_INFO.getCellData(row, "INCDNT_ID"));
		dma_subsearch.set("OPER_DT", dlt_BRT_INCDNT_INFO.getCellData(row, "OPER_DT"));
		dma_subsearch.set("REP_ROUT_ID", dlt_BRT_INCDNT_INFO.getCellData(row, "REP_ROUT_ID"));
		dma_subsearch.set("VHC_ID", dlt_BRT_INCDNT_INFO.getCellData(row, "VHC_ID"));
		dma_subsearch.set("INCDNT_TYPE", dlt_BRT_INCDNT_INFO.getCellData(row, "INCDNT_TYPE"));
		dma_subsearch.set("ROUT_ID", dlt_BRT_INCDNT_INFO.getCellData(row, "ROUT_ID"));
		dma_subsearch.set("OCR_DTM", dlt_BRT_INCDNT_INFO.getCellData(row, "OCR_DTM"));
		dma_subsearch.set("COR_ID", dlt_BRT_INCDNT_INFO.getCellData(row, "COR_ID"));
		dma_subsearch.set("ROUT_NM", dlt_BRT_INCDNT_INFO.getCellData(row, "ROUT_NM"));
		dma_subsearch.set("VHC_NO", dlt_BRT_INCDNT_INFO.getCellData(row, "VHC_NO"));
		dma_subsearch.set("LINK_ID", dlt_BRT_INCDNT_INFO.getCellData(row, "LINK_ID"));
		dma_subsearch.set("NODE_ID", dlt_BRT_INCDNT_INFO.getCellData(row, "NODE_ID"));
		
		var focusOption = {keyMap : dma_subsearch};
		com.changeDualGrid(MO0303G0, MO0303G1, sub_MO0303G1S0, sub_MO0303G1R0, focusOption, row, oldRow);
		
		//com.searchGrid(MO0303G1, sub_MO0303G1R0);		
	};
	
	scwin.sbx_ChoiceBox_onviewchange = function(info) {
		if (info.newValue == "ALL") {
			acb_autoChoiceBox.hide();
			search_input.setValue("");
			search_input.show("");
		} 
		else if (info.newValue == "VHC_NO") {
			search_input.hide();
			acb_autoChoiceBox.setNodeSet("data:dlt_searchitem", "VHC_NO", "VHC_NO");
			acb_autoChoiceBox.show("");
		}
		else if (info.newValue == "INCDNT_ID") {
			search_input.hide();
			acb_autoChoiceBox.setNodeSet("data:dlt_searchitem", "INCDNT_ID", "INCDNT_ID");
			acb_autoChoiceBox.show("");
		}
	};
	
   scwin.REP_ROUT_NM_onfocus = function(e) {
      scwin.REP_ROUT_NM_SEARCH_onclick();
   };	
	
   scwin.REP_ROUT_NM_SEARCH_onclick = function(e) {
      var data = {callbackFn : "scwin.REP_ROUT_NM_SEARCH_callback" };
      var options = { id : "popUpRepRoutList",
                  popupName : "대표노선 목록", 
                  modal : true};
      com.openPopup("/cm/common/popUpRepRoutList.xml", options, data);
   };	
	
	
	scwin.REP_ROUT_NM_SEARCH_callback = function(obj) {
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_ID", obj[0].REP_ROUT_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_NM", obj[0].REP_ROUT_NM);
	}	
	
	scwin.ROUT_NM_onfocus = function(e) {
		scwin.ROUT_NM_SEARCH_onclick();
	};
	
	scwin.ROUT_NM_SEARCH_onclick = function(e) {
      var data = {callbackFn : "scwin.ROUT_NM_SEARCH_callback" };
      var options = { id : "popUpRoutList",
                  popupName : "노선 목록", 
                  modal : true};
      com.openPopup("/cm/common/popUpRoutList.xml", options, data);		
	};
	
	scwin.ROUT_NM_SEARCH_callback = function(obj) {
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "ROUT_ID", obj[0].ROUT_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "ROUT_NM", obj[0].ROUT_NM);
	}		
	
	scwin.VHC_NO_onfocus = function(e) {
		scwin.VHC_NO_SEARCH_onclick();
	};
	
	scwin.VHC_NO_SEARCH_onclick = function(e) {
	  var repRoutId = dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_ID");
      var data = {data: repRoutId, callbackFn : "scwin.VHC_NO_SEARCH_callback" };
      var options = { id : "popUpVhcList",
                  popupName : "금일 운행중 차량 목록", 
                  modal : true};
      com.openPopup("/cm/common/popUpCurOperVhcList.xml", options, data);			
	};
	
	scwin.VHC_NO_SEARCH_callback = function(obj) {
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_ID", obj[0].REP_ROUT_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "VHC_ID", obj[0].VHC_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "ROUT_ID", obj[0].ROUT_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "ALLOC_NO", obj[0].ALLOC_NO);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "OPER_SN", obj[0].OPER_SN);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "NODE_ID", obj[0].NODE_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "DRV_ID", obj[0].DRV_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "GPS_X", obj[0].GPS_X);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "GPS_Y", obj[0].GPS_Y);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_NM", obj[0].REP_ROUT_NM);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "LINK_ID", obj[0].LINK_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "ROUT_NM", obj[0].ROUT_NM);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "VHC_NO", obj[0].VHC_NO);
	}		
	
	scwin.DRV_NM_onfocus = function(e) {
		scwin.DRV_NM_SEARCH_onclick();
	};
	
	scwin.DRV_NM_SEARCH_onclick = function(e) {
      var data = {callbackFn : "scwin.DRV_NM_SEARCH_callback" };
      var options = { id : "popUpDrvList",
                  popupName : "운전자 목록", 
                  modal : true};
      com.openPopup("/cm/common/popUpDrvList.xml", options, data);			
	};
	
	scwin.DRV_NM_SEARCH_callback = function(obj) {
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "DRV_ID", obj[0].DRV_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "DRV_NM", obj[0].DRV_NM);
	}	
	
	scwin.btn_position_onclick = function() {
		var row = MO0303G0.getFocusedRowIndex();

		var data = { GPS_X : dlt_BRT_INCDNT_INFO.getCellData(row, "GPS_X"), 
					 GPS_Y : dlt_BRT_INCDNT_INFO.getCellData(row, "GPS_Y"),
					 COMP_ID : dlt_BRT_INCDNT_INFO.getCellData(row, "COMP_ID"), 
					 ROW_INDEX : row,
					 callbackFn : "scwin.btn_position_callback"}
					  
		var options = {
			id : "MO0303P01",
			popupName : "위치 설정",
			modal : true,
			width : 900,
			height : 590
		};
		com.openPopup(("/ui/BRT/MO0303/MO0303P01.xml"), options, data);
	};
	
	scwin.btn_position_callback	= function(obj) {
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "GPS_X", obj[0].GPS_X);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "GPS_Y", obj[0].GPS_Y);			
	}
	
	//서브 그리드 추가 클릭 이벤트
	scwin.btn_add2_onclick = function() {
		var focusRowIdx = MO0303G0.getFocusedRowIndex();
		if (focusRowIdx == -1) {
			com.alert("돌발상황 목록 선택후 대응 목록을 등록하실 수 있습니다.");
		} else {
		
			var rowStatus = MO0303G0.getRowStatus(focusRowIdx);
			if (rowStatus == "C") {
				com.alert("돌발상황 등록 후에 사용 가능합니다.");
			} else {
				com.executeSubmission(sub_MO0303G1K0);
			}
		}		
	
		
	};	
	
	scwin.sub_MO0303G1R0_submitdone = function(e) {
		if(dlt_BRT_INCDNT_RES_INFO.getDataLength() > 0) {
			com.setFocusedCell(MO0303G1, "CLOSE_DTM");
		}
	};
	
	scwin.CLSFCTN_NM_onfocus = function(e) {
		scwin.CLSFCTN_NM_SEARCH_onclick();
	};
	
	
   scwin.CLSFCTN_NM_SEARCH_onclick = function(e) {
      var data = {callbackFn : "scwin.CLSFCTN_NM_SEARCH_callback" };
      var options = { id : "popUpEmerList",
                  popupName : "비상연락처 목록", 
                  modal : true};
      com.openPopup("/cm/common/popUpEmerList.xml", options, data);	
	}
	
	scwin.CLSFCTN_NM_SEARCH_callback = function(obj) {
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "CLSFCTN_ID", obj[0].CLSFCTN_ID);
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "CLSFCTN_NM", obj[0].CLSFCTN_NM);
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "PHONE", obj[0].PHONE);
	}	
	
	scwin.btn_scnro_onclick = function() {
		
	  if(MO0303G1.getFocusedRowIndex() != -1){
	      var data = {callbackFn : "scwin.btn_scnro_callback" };
	      var options = { id : "btn_scnro",
	                  popupName : "시나리오 불러오기",
	                  width : 1500,
	                  heigth : 200, 
	                  modal : true};
			com.openPopup(("/ui/BRT/MO0303/MO0303P02.xml"), options, data);		
	 }
	  else {
			com.alert("대응 목록 선택 후 시나리오를 불러올 수 있습니다.");  	
		}  
	 	
	};
	
	scwin.btn_scnro_callback = function(obj) {
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "CLSFCTN_ID", obj[0].CLSFCTN_ID);
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "CLSFCTN_NM", obj[0].CLSFCTN_NM);
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "PHONE", obj[0].PHONE);		
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "REMARK", obj[0].RES_SCNRO);		
	}
	
	scwin.sub_MO0303G0K0_submitdone = function(e) {
		com.addGridForm(MO0303G0, MO0303F0, dma_SEQ_BRT_INCDNT_INFO_0, "INCDNT_ID", "OPER_DT");
	};
	
	scwin.sub_MO0303G1K0_submitdone = function(e) {
		com.addGridForm(MO0303G1, MO0303F1, dma_SEQ_BRT_INCDNT_RES_INFO_0, "INCDNT_RES_ID", "CLOSE_DTM");
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "INCDNT_ID", dma_subsearch.get("INCDNT_ID"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "OPER_DT", dma_subsearch.get("OPER_DT"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "REP_ROUT_ID", dma_subsearch.get("REP_ROUT_ID"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "VHC_ID", dma_subsearch.get("VHC_ID"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "INCDNT_TYPE", dma_subsearch.get("INCDNT_TYPE"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "ROUT_ID", dma_subsearch.get("ROUT_ID"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "COR_ID", dma_subsearch.get("COR_ID"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "ROUT_NM", dma_subsearch.get("ROUT_NM"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "LINK_ID", dma_subsearch.get("LINK_ID"));
		dlt_BRT_INCDNT_RES_INFO.setCellData(MO0303G1.getFocusedRowIndex(), "NODE_ID", dma_subsearch.get("NODE_ID"));
	};
	
	scwin.sub_MO0303G1S0_submitdone = function(e) {
		com.saveDone(MO0303G1,sub_MO0303G1R0);
	};
	
	scwin.NODE_NM_onfocus = function(e) {
		scwin.NODE_NM_SEARCH_onclick();
	};
	
	scwin.NODE_NM_SEARCH_onclick = function(e) {
      var data = {callbackFn : "scwin.NODE_NM_SEARCH_callback" };
      var options = { id : "popUpSttnCrsList",
                  popupName : "정류소, 교차로 목록", 
                  modal : true};
      com.openPopup("/cm/common/popUpSttnCrsList.xml", options, data);		
	};
	
	scwin.NODE_NM_SEARCH_callback = function(obj) {
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "NODE_ID", obj[0].NODE_ID);
		dlt_BRT_INCDNT_INFO.setCellData(MO0303G0.getFocusedRowIndex(), "NODE_NM", obj[0].NODE_NM);
	}
	
	scwin.btn_incdntMessage_onclick = function() {
      var data = { callbackFn : "scwin.btn_message_callback",
     	incdnt_gps_x : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "GPS_X"),
     	incdnt_gps_y : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "GPS_Y"),
     	incdnt_rep_rout_id : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_ID"),
     	incdnt_detail : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "INCDNT_DETAIL")
     	
 	 };
      
//      var options = { id : "MO0303P03",
//                  popupName : "돌발상황 메시지 전송",
//                  width : 910,
//                  height : 600, 
//                  modal : true};
//      com.openPopup("/ui/BRT/MO0303/MO0303P03.xml", options, data);			
	};
	
	scwin.btn_message_callback = function(obj) {
		
	}
	
	scwin.btn_incdntResMessage_onclick = function() {
      var data = { callbackFn : "scwin.btn_message_callback",
     	incdnt_gps_x : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "GPS_X"),
     	incdnt_gps_y : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "GPS_Y"),
     	incdnt_rep_rout_id : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_ID"),
     	incdnt_res_remark : dlt_BRT_INCDNT_RES_INFO.getCellData(MO0303G1.getFocusedRowIndex(), "REMARK")
     	
 	 };
      	
//      var options = { id : "MO0303P04",
//                  popupName : "돌발대응 메시지 전송",
//                  width : 910,
//                  height : 600, 
//                  modal : true};
//      com.openPopup("/ui/BRT/MO0303/MO0303P04.xml", options, data);		
		
	}
	
	scwin.F_DATE_onviewchange = function(info) {
		
	};
	
	scwin.L_DATE_onviewchange = function(info) {
		
	};
	
	scwin.btn_play_onclick = function() {
	  var focusRowIndex = MO0303G0.getFocusedRowIndex();	
		
	  if(focusRowIndex == -1) {
		  	com.alert("돌발상황 목록 선택후 돌발 메시지를 전송할 수 있습니다.");
		 }	
	  else {
	      var data = { callbackFn : "scwin.btn_message_callback",
	     	incdnt_gps_x : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "GPS_X"),
	     	incdnt_gps_y : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "GPS_Y"),
	     	incdnt_rep_rout_id : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_ID"),
	     	incdnt_rep_rout_nm : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "REP_ROUT_NM"),
	     	incdnt_detail : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "INCDNT_DETAIL"),
	     	incdnt_res_remark : dlt_BRT_INCDNT_RES_INFO.getCellData(MO0303G1.getFocusedRowIndex(), "REMARK"),
	     	incdnt_id : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "INCDNT_ID"),
	     	incdnt_rout_id : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "ROUT_ID"),
	     	incdnt_rout_nm : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "ROUT_NM"),
	     	incdnt_type : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "INCDNT_TYPE"),
	     	incdnt_res_yn : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "INCDNT_RES_YN"),
	     	incdnt_link_nm : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "LINK_NM"),
	     	incdnt_vhc_id : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "VHC_ID"),
	     	incdnt_vhc_no : dlt_BRT_INCDNT_INFO.getCellData(MO0303G0.getFocusedRowIndex(), "VHC_NO")
	     	
	 	 };
	      
	      var options = { id : "popUpIncdntMessage",
	                  popupName : "돌발 메시지 전송",
	                  width : 1100,
	                  height : 600, 
	                  modal : true};
	      com.openPopup("/cm/common/popUpIncdntMessage.xml", options, data);	
		  
		 }	 
		
	}]]></script>
	</head>
	<body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">
		<xf:group id="pgm_container" class="pgm_container grdr_41_36_a" style="">
			<xf:group id="pgm_navi" class="pgm_navi" style="">
				<w2:wframe id="wfm_navi" style="" src="/cm/common/wf_navi.xml" scope="true"></w2:wframe>
			</xf:group>
			<xf:group class="pgm_header" id="pgm_header" style="">
				<xf:group class="gr_search" id="" style="">
						<xf:select1 allOption="" appearance="minimal" chooseOption="" direction="auto" disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" ev:onviewchange="scwin.sbx_ChoiceBox_onviewchange" id="TYPE10" optionOrder="false" ref="data:dma_search.TYPE" class="search_type_100" style="" submenuSize="auto" textAlign="left">
							<xf:choices>
								<xf:item>
									<xf:label><![CDATA[전체]]></xf:label>
									<xf:value><![CDATA[ALL]]></xf:value>
								</xf:item>
								<xf:item>
									<xf:label><![CDATA[돌발ID]]></xf:label>
									<xf:value><![CDATA[INCDNT_ID]]></xf:value>
								</xf:item>
								<xf:item>
									<xf:label><![CDATA[차량번호]]></xf:label>
									<xf:value><![CDATA[VHC_NO]]></xf:value>
								</xf:item>
							</xf:choices>
						</xf:select1>
						<xf:input id="search_input" class="search_input" ref="data:dma_search.CONTENT" placeholder="돌발ID 또는 차번"></xf:input>
						<w2:autoComplete allOption="" caseSensitive="false" chooseOption="true" chooseOptionLabel="-전체-" chooseOptionValue="" class="search_auto" displayMode="label" editType="select" emptyItem="" emptyValue="" ev:onchange="" ev:onviewchange="scwin.sbx_ChoiceBox_onviewchange" id="acb_autoChoiceBox" interactionMode="" noResult="useData" ref="data:dma_search.CONTENT" search="start" selectedData="" style="display:none" submenuSize="auto" textAlign="left" useKeywordHighlight="false" visibleRowNum="" nextTabByEnter="" disableEdit="">
							<w2:choices>
								<w2:itemset nodeset="data:dlt_searchitem">
									<w2:label ref="VHC_NO"></w2:label>
									<w2:value ref="VHC_NO"></w2:value>
								</w2:itemset>
							</w2:choices>
						</w2:autoComplete>
						<w2:span id="" class="" label="일시  " style="margin-bottom: 5px;margin-left: 10px;margin-right: 10px;float: left;"></w2:span>
						<w2:inputCalendar footerDiv="false" rightAlign="false" focusOnDateSelect="false" style="width:120px; margin-right: 10px; margin-bottom: 5px; float: left;" id="F_DATE" renderType="component" renderDiv="true" calendarValueType="yearMonthDate" ref="data:dma_search.F_DATE" ev:onviewchange="scwin.F_DATE_onviewchange">
						</w2:inputCalendar>
						<w2:span label="~" style="margin-right: 10px;margin-bottom: 5px;float: left;" id="">
						</w2:span>
						<w2:inputCalendar footerDiv="false" rightAlign="false" focusOnDateSelect="false" style="width:120px; margin-right: 10px; margin-bottom: 5px; float: left;" id="L_DATE" renderType="component" renderDiv="true" calendarValueType="yearMonthDate" ref="data:dma_search.L_DATE" ev:onviewchange="scwin.L_DATE_onviewchange">
						</w2:inputCalendar>							
					<w2:wframe class="" id="wfm_mainBtn" scope="true" src="/cm/common/wf_mainBtn.xml" style=""></w2:wframe>
				</xf:group>
			</xf:group>
			<xf:group id="pgm_content" class="pgm_content grdc_800_20_a" style="">
				<xf:group id="pgm_list" class="pgm_list grdr_20_2_250_20_a" style="">
					<xf:group class="defaultbox" id="" style="">
						<w2:textbox class="df_tt fl" id="" label="돌발상황 목록" style=""></w2:textbox>
					</xf:group>
					<xf:group></xf:group>
					<xf:group id="" class="" style="">
						<w2:gridView alwaysTriggerScrollStart="" autoFit="lastColumn" captionTitle="" class="cm_grid left"
							dataList="data:dlt_BRT_INCDNT_INFO" enterKeyMove="" ev:onafteredit="" ev:oncellclick="" ev:oneditkeyup="" ev:onkeyup=""
							ev:onrowindexchange="scwin.MO0303G0_onrowindexchange" ev:ontextimageclick="" ev:onviewchange="" fixedColumnWithHidden="true"
							id="MO0303G0" ignoreCellClick="false" nextTabID="" rowNumHeaderValue="순번" rowNumVisible="true" rowStatusHeaderValue=""
							rowStatusVisible="false" rowStatusWidth="40" scrollByColumn="false" style="" useShiftKey="true" visibleRowNum="" wheelRows=""
							autoFitMinWidth="0" disabledScrollHidden="" editModeEvent="" editModeEventIcon="" checkEditableInputClass="" keyMoveEditMode=""
							moveKeyEditMode="" moveKeyEditModeAll="" ignoreNonEditableCellTabEnter="" readOnly="true" keepDefaultColumnWidth=""
							oddEvenColorDisplay="" rowNumWidth="" summaryAuto="" excludeDeletedRows="" useCtrlOnMultisort="" useFilterList=""
							useFilterListSync="" sortedIconPosition="" sortable="" sortOrderReverse="" showSortableUseFilter="" focusMode="row"
							rowNumStatusUniqueId="" rowNumStatusResize="" ev:onbeforecolumnmove="" userData1="">
							<w2:caption style="" id="caption1" value="this is a grid caption."></w2:caption>
							<w2:header style="" id="header1">
								<w2:row style="" id="row1">
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column30"
										value="돌발대응여부" blockSelect="false" displayMode="label" class="req">
									</w2:column>
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column24"
										value="돌발ID" blockSelect="false" displayMode="label" class="req">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column22"
										value="운행일" blockSelect="false" displayMode="label" class="req">
									</w2:column>
									<w2:column removeBorderStyle="false" width="150" inputType="text" style="height:20px" id="column13"
										value="발생일시" blockSelect="false" displayMode="label" dataType="" class="req">
									</w2:column>
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column12"
										value="차량번호" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column10"
										value="대표노선명" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column9"
										value="노선명" blockSelect="false" displayMode="label">
									</w2:column>								
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column19"
										value="돌발유형" blockSelect="false" displayMode="label" calendarClass="">
									</w2:column>
									<w2:column removeBorderStyle="false" width="200" inputType="text" style="height:20px" id="column16"
										value="돌발상세내역" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="200" inputType="text" style="height:20px" id="column23"
										value="비고" blockSelect="false" displayMode="label">
									</w2:column>
								</w2:row>
							</w2:header>
							<w2:gBody style="" id="gBody1">
								<w2:row style="" id="row2">
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="INCDNT_RES_YN"
										value="" blockSelect="false" displayMode="label" userData1="M">
									</w2:column>								
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="INCDNT_ID"
										value="" blockSelect="false" displayMode="label" userData1="M">
									</w2:column>								
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="OPER_DT"
										value="" blockSelect="false" displayMode="label" userData1="M">
									</w2:column>								
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="OCR_DTM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="VHC_NO"
										value="" blockSelect="false" displayMode="label" userData1="M">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="REP_ROUT_NM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>																
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="ROUT_NM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>	
									<w2:column removeBorderStyle="false" width="70" inputType="select" style="height:20px" id="INCDNT_TYPE"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="150" inputType="text" style="height:20px" id="INCDNT_DETAIL"
										value="" blockSelect="false" displayMode="label" textAlign="left">
									</w2:column>
									<w2:column removeBorderStyle="false" width="150s" inputType="text" style="height:20px" id="REMARK"
										value="" blockSelect="false" displayMode="label" textAlign="left">
									</w2:column>
								</w2:row>
							</w2:gBody>
							<w2:footer style="" id="footer1">
								<w2:row style="" id="row3">
									<w2:column removeBorderStyle="false" width="NaN" inputType="expression" style="height:20px;"
										id="column42" value="" blockSelect="false" displayMode="label" colSpan="15" rowSpan=""
										expression="&quot;데이터 개수 : &quot; + COUNT(&apos;COMP_ID&apos;)" textAlign="left">
									</w2:column>
								</w2:row>
							</w2:footer>							
						</w2:gridView>
					</xf:group>
					<xf:group id="" class="horizontal_line"></xf:group>				
					<xf:group id="pgm_subList" class="pgm_list grdr_20_2_a" style="">
						<xf:group id="" class="gr_sub_header" style="">
							<xf:group class="defaultbox" id="" style="">
								<w2:textbox class="df_tt fl" id="" label="돌발상황 상세 정보" style=""></w2:textbox>
							</xf:group>
							<w2:wframe id="wfm_subBtn3" class="" style="" src="/cm/common/wf_subBtn.xml" scope="true"></w2:wframe>
						</xf:group>
						<xf:group></xf:group>					
							<xf:group id="" class="" style="">
								<xf:group adaptive="layout" class="w2tb tb" id="MO0303F0" style="" tagname="table">
								<w2:attributes>
									<w2:summary></w2:summary>
								</w2:attributes>
								<xf:group tagname="colgroup">
									<xf:group style="width:90px;" tagname="col"></xf:group>
									<xf:group tagname="col" style="width:120.00px;"></xf:group>
									<xf:group style="width:90px;" tagname="col"></xf:group>
									<xf:group style="width:120px;" tagname="col"></xf:group>
								</xf:group>
								<xf:group tagname="tr" style=""><xf:group tagname="th" class="w2tb_th req">돌발ID<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes>
											<w2:colspan>3</w2:colspan>
											<w2:rowspan>1</w2:rowspan>
										</w2:attributes>
										<xf:input allowChar="" customModelFormatter="" customModelUnformatter="" dataType="text" disabled="true"
											displayFormatter="" ev:onfocus="scwin.VHC_NO_onfocus" id="INCDNT_ID" maskFormat="" maxByteLength="" maxlength="9" minByteLength=""
											ref="data:dlt_BRT_INCDNT_INFO.INCDNT_ID" style="width:150px;height: 21px;" validator="">
										</xf:input>
									</xf:group></xf:group><xf:group style="" tagname="tr">
									<xf:group class="w2tb_th req" style="" tagname="th">운행일</xf:group>
									<xf:group class="w2tb_td" style="" tagname="td">
										<w2:attributes>
											<w2:colspan>1</w2:colspan>
											<w2:rowspan>1</w2:rowspan>
										</w2:attributes>
										<!-- <xf:input class="" id="" mandatory="" ref="data:dlt_BRT_INCDNT_INFO.OPER_DT" style="width:100px;height:21px;"
											disabled="" adjustMaxLength="">
										</xf:input> -->
										<w2:inputCalendar footerDiv="false" id="" style="width:150px;height:23px;" renderDiv="true"
											focusOnDateSelect="false" calendarValueType="yearMonthDate" rightAlign="false" renderType="component" ref="data:dlt_BRT_INCDNT_INFO.OPER_DT" readOnly="">
										</w2:inputCalendar>										
									</xf:group>
									<xf:group class="w2tb_th req" style="" tagname="th">발생일시</xf:group>
									<xf:group class="w2tb_td" style="" tagname="td">
										<w2:inputCalendar calendarValueType="yearMonthDateTimeSec" displayFormat=""
											focusOnDateSelect="false" footerDiv="false" id="OCR_DTM" readOnly="" ref="data:dlt_BRT_INCDNT_INFO.OCR_DTM" renderDiv="true"
											renderType="component" rightAlign="false" style="width:150px;height:23px;" validCheck="">
										</w2:inputCalendar>
									</xf:group>
								</xf:group>
								<xf:group style="" tagname="tr">
									<xf:group tagname="td" class="w2tb_th" id="">차량번호<w2:attributes></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes></w2:attributes>
										<xf:input allowChar="" customModelFormatter="" customModelUnformatter="" dataType="text" disabled=""
											displayFormatter="" ev:onfocus="scwin.VHC_NO_onfocus" id="VHC_NO" maskFormat="" maxByteLength="" maxlength="9" minByteLength=""
											ref="data:dlt_BRT_INCDNT_INFO.VHC_NO" style="width:150px;height: 21px;" validator="">
										</xf:input>
										<xf:image class="btn" ev:onclick="scwin.VHC_NO_SEARCH_onclick" id="VHC_NO_SEARCH" longdesc=""
											src="/cm/images/inc/icon_search.gif" style="width:21px;height:23px;margin-left:5px;">
										</xf:image>
									</xf:group>
									<xf:group class="w2tb_th" style="" tagname="th">대표노선명</xf:group>
									<xf:group class="w2tb_td" style="" tagname="td">
										<w2:attributes>
											<w2:colspan>1</w2:colspan>
											<w2:rowspan>1</w2:rowspan>
										</w2:attributes>
										<xf:input adjustMaxLength="" class="" disabled="" ev:oneditenter=""
											ev:onfocus="scwin.REP_ROUT_NM_onfocus" fireEventOnInvalid="" id="REP_ROUT_NM" invalidMessageFunc="" mandatory="" maxlength="5"
											readOnly="" ref="data:dlt_BRT_INCDNT_INFO.REP_ROUT_NM" style="width:150px;height:21px;" validateOnCheckMaxByteLength=""
											validateOnInput="" validator="">
										</xf:input>
										<xf:image class="btn" ev:onclick="scwin.REP_ROUT_NM_SEARCH_onclick" id="REP_ROUT_NM_SEARCH"
											longdesc="" src="/cm/images/inc/icon_search.gif" style="width:21px;height:23px;margin-left:5px;">
										</xf:image>
									</xf:group>
								</xf:group><xf:group tagname="tr" style=""><xf:group tagname="td" id="" class="w2tb_th">노선명<w2:attributes></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes></w2:attributes>
										<xf:input allowChar="" customModelFormatter="" customModelUnformatter="" dataType="text" disabled=""
											displayFormatter="" ev:onfocus="scwin.ROUT_NM_onfocus" id="ROUT_NM" maskFormat="" maxlength="30" minByteLength=""
											ref="data:dlt_BRT_INCDNT_INFO.ROUT_NM" style="width:150px;height: 21px;" validator="">
										</xf:input>
										<xf:image class="btn" ev:onclick="scwin.ROUT_NM_SEARCH_onclick" id="ROUT_NM_SEARCH" longdesc=""
											src="/cm/images/inc/icon_search.gif" style="width:21px;height:23px;margin-left:5px;">
										</xf:image>
									</xf:group>
									<xf:group tagname="th" class="w2tb_th">돌발유형<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes></w2:attributes>
										<xf:select1 allOption="" appearance="minimal" chooseOption="" chooseOptionLabel="선택"
											direction="auto" disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" id="INCDNT_TYPE" labelWidthAuto=""
											mandatory="true" optionOrder="" ref="data:dlt_BRT_INCDNT_INFO.INCDNT_TYPE" renderType="component"
											style="height:24px;width: 150px;" submenuSize="auto">
											<xf:choices></xf:choices>
										</xf:select1>
									</xf:group></xf:group><xf:group tagname="tr" style=""><xf:group tagname="td" id="" class="w2tb_th">배차번호<w2:attributes></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes></w2:attributes>
										<xf:input allowChar="0-9" customModelFormatter="" customModelUnformatter="" dataType="text" disabled="" displayFormatter="" id=""
											maskFormat="" maxlength="" minByteLength="" ref="data:dlt_BRT_INCDNT_INFO.ALLOC_NO" style="width:150px;height: 21px;text-align: right;" validator="">
										</xf:input>
									</xf:group>
									<xf:group tagname="th" class="w2tb_th">운행순번<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes></w2:attributes>
										<xf:input allowChar="0-9" customModelFormatter="" customModelUnformatter="" dataType="text" disabled="" displayFormatter="" id=""
											maskFormat="" maxlength="" minByteLength="" ref="data:dlt_BRT_INCDNT_INFO.OPER_SN" style="width:150px;height: 21px;text-align: right;" validator="" textAlign="right">
										</xf:input>
									</xf:group></xf:group><xf:group tagname="tr" style=""><xf:group tagname="td" id="" class="w2tb_th">운전자명<w2:attributes></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes></w2:attributes>
										<xf:input allowChar="" customModelFormatter="" customModelUnformatter="" dataType="text" disabled=""
											displayFormatter="" ev:onfocus="scwin.DRV_NM_onfocus" id="DRV_NM" maskFormat="" maxlength="" minByteLength=""
											ref="data:dlt_BRT_INCDNT_INFO.DRV_NM" style="width:150px;height: 21px;" validator="">
										</xf:input>
										<xf:image class="btn" ev:onclick="scwin.DRV_NM_SEARCH_onclick" id="DRV_NM_SEARCH" longdesc=""
											src="/cm/images/inc/icon_search.gif" style="width:21px;height:23px;margin-left:5px;">
										</xf:image>
									</xf:group>
									<xf:group tagname="th" class="w2tb_th">위치<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes></w2:attributes>
										<w2:anchor class="btn_gcm" ev:onclick="scwin.btn_position_onclick" id="btn_position" outerDiv="true"
											style="left:0px;top:0px;margin-right: 5px;">
											<xf:label><![CDATA[설정]]></xf:label>
										</w2:anchor>
									</xf:group></xf:group><xf:group tagname="tr" style=""><xf:group tagname="td" id="" class="w2tb_th">노드명<w2:attributes></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes><w2:colspan>3</w2:colspan><w2:rowspan>1</w2:rowspan></w2:attributes>
										<xf:input allowChar="" customModelFormatter="" customModelUnformatter="" dataType="text" disabled="" displayFormatter="" id="NODE_NM"
											maskFormat="" maxlength="" minByteLength="" ref="data:dlt_BRT_INCDNT_INFO.NODE_NM" style="width:200px;height: 21px;" validator="" ev:onfocus="scwin.NODE_NM_onfocus">
										</xf:input>
										<xf:image class="btn" ev:onclick="scwin.NODE_NM_SEARCH_onclick" id="NODE_NM_SEARCH" longdesc=""
											src="/cm/images/inc/icon_search.gif" style="width:21px;height:23px;margin-left:5px;">
										</xf:image>											
									</xf:group></xf:group><xf:group tagname="tr" style=""><xf:group tagname="th" tabIndex="" id="" class="w2tb_th">돌발상세내역<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes>
											<w2:colspan>3</w2:colspan>
											<w2:rowspan>1</w2:rowspan>
										</w2:attributes>
										<xf:textarea adjustMaxLength="" class="" disabled="" id="INCDNT_DETAIL" mandatory="" ref="data:dlt_BRT_INCDNT_INFO.INCDNT_DETAIL"
											style="width:100%;height: 50px;" maxlength="100">
										</xf:textarea>
									</xf:group></xf:group><xf:group tagname="tr" style="">
									<xf:group tagname="th" class="w2tb_th" style="height: 24px;vertical-align: top;" id="" tabIndex="">
										비고
										<w2:attributes>
											<w2:scope>row</w2:scope>
										</w2:attributes>
									</xf:group>
									<xf:group tagname="td" class="w2tb_td">
										<w2:attributes>
											<w2:colspan>3</w2:colspan>
											<w2:rowspan>1</w2:rowspan>
										</w2:attributes>
										<xf:textarea adjustMaxLength="" class="" disabled="" id="" mandatory="" ref="data:dlt_BRT_INCDNT_INFO.REMARK"
											style="width:100%;height: 70px;">
										</xf:textarea>
									</xf:group>
								</xf:group>
							</xf:group>							
							</xf:group>
					</xf:group>
				</xf:group>
				<xf:group id="" class="vertical_line"></xf:group>
				<xf:group class="pgm_detail grdr_20_2_200_20_20_2_a">
					<xf:group id="" class="gr_sub_header" style="">
						<xf:group class="defaultbox" id="" style="">
							<w2:textbox class="df_tt fl" id="" label="대응 목록" style=""></w2:textbox>
						</xf:group>
						<w2:wframe id="wfm_subBtn" class="" style="" src="/cm/common/wf_subBtn.xml" scope="true"></w2:wframe>						
					</xf:group>
					<xf:group></xf:group>
					<xf:group id="" class="" style="">
						<w2:gridView alwaysTriggerScrollStart="" autoFit="lastColumn" autoFitMinWidth="0" captionTitle=""
							checkEditableInputClass="" class="cm_grid right" dataList="data:dlt_BRT_INCDNT_RES_INFO" disabledScrollHidden="" editModeEvent=""
							editModeEventIcon="" enterKeyMove="" ev:onafteredit="" ev:onbeforecolumnmove="" ev:oncellclick="" ev:oneditkeyup="" ev:onkeyup=""
							ev:onrowindexchange="" ev:ontextimageclick="" ev:onviewchange="" excludeDeletedRows="" fixedColumnWithHidden="true" focusMode="row"
							id="MO0303G1" ignoreCellClick="false" ignoreNonEditableCellTabEnter="" keepDefaultColumnWidth="" keyMoveEditMode=""
							moveKeyEditMode="" moveKeyEditModeAll="" nextTabID="" oddEvenColorDisplay="" readOnly="true" rowNumHeaderValue="순번"
							rowNumStatusResize="" rowNumStatusUniqueId="" rowNumVisible="true" rowNumWidth="" rowStatusHeaderValue="" rowStatusVisible="false"
							rowStatusWidth="40" scrollByColumn="false" showSortableUseFilter="" sortOrderReverse="" sortable="" sortedIconPosition="" style=""
							summaryAuto="" useCtrlOnMultisort="" useFilterList="" useFilterListSync="" useShiftKey="true" visibleRowNum="" wheelRows="">
							<w2:caption style="" id="caption1" value="this is a grid caption."></w2:caption>
							<w2:header style="" id="header1">
								<w2:row style="" id="row1">
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column22"
										value="돌발대응ID" blockSelect="false" displayMode="label" class="req">
									</w2:column>
									<w2:column removeBorderStyle="false" width="150" inputType="text" style="height:20px" id="column9"
										value="종료일시" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column1"
										value="진행구분" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column10"
										value="비상연락처" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column11"
										value="전화번호" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="100" inputType="text" style="height:20px" id="column3"
										value="돌발대응유형" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column2"
										value="돌발대응내용" blockSelect="false" displayMode="label">
									</w2:column>
								</w2:row>
							</w2:header>
							<w2:gBody style="" id="gBody1">
								<w2:row style="" id="row2">
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="INCDNT_RES_ID"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="CLOSE_DTM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="select" style="height:20px" id="PROG_DIV"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="CLSFCTN_NM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="PHONE"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="select" style="height:20px"
										id="INCDNT_RES_TYPE" value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="REMARK"
										value="" blockSelect="false" displayMode="label" textAlign="left">
									</w2:column>
								</w2:row>
							</w2:gBody>
							<w2:footer style="" id="footer1">
								<w2:row style="" id="row3">
									<w2:column removeBorderStyle="false" width="NaN" inputType="expression" style="height:20px;"
										id="column42" value="" blockSelect="false" displayMode="label" colSpan="15" rowSpan=""
										expression="&quot;데이터 개수 : &quot; + COUNT(&apos;COMP_ID&apos;)" textAlign="left">
									</w2:column>
								</w2:row>
							</w2:footer>							
						</w2:gridView>
					</xf:group>					
					<xf:group id="" class="horizontal_line">
					</xf:group>
					<xf:group id="" class="gr_sub_header" style="">
						<xf:group class="defaultbox" id="" style="">
							<w2:textbox class="df_tt fl" id="" label="대응 상세" style=""></w2:textbox>
						</xf:group>
						<w2:wframe id="wfm_subBtn2" class="" style="" src="/cm/common/wf_subBtn.xml" scope="true"></w2:wframe>					
					</xf:group>
					<xf:group></xf:group>
					<xf:group id="" class="pgm_detail2" style="">
						<xf:group adaptive="layout" class="w2tb tb" id="MO0303F1" style="" tagname="table">
							<w2:attributes>
								<w2:summary></w2:summary>
							</w2:attributes>
							<xf:group tagname="colgroup">
								<xf:group style="width:90px;" tagname="col"></xf:group>
								<xf:group tagname="col" style="width:120.00px;"></xf:group>
								<xf:group style="width:90px;" tagname="col"></xf:group>
								<xf:group style="width:120px;" tagname="col"></xf:group>
							</xf:group>
							<xf:group tagname="tr" style=""><xf:group tagname="th" class="w2tb_th req">돌발대응ID<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
								<xf:group tagname="td" class="w2tb_td">
									<w2:attributes>
										<w2:colspan>3</w2:colspan>
										<w2:rowspan>1</w2:rowspan>
									</w2:attributes>
									<xf:input allowChar="" customModelFormatter="" customModelUnformatter="" dataType="text" disabled="true"
										displayFormatter="" ev:onfocus="scwin.VHC_NO_onfocus" id="INCDNT_RES_ID" maskFormat="" maxByteLength="" maxlength="9"
										minByteLength="" ref="data:dlt_BRT_INCDNT_RES_INFO.INCDNT_RES_ID" style="width:150px;height: 21px;" validator="">
									</xf:input>
								</xf:group></xf:group><xf:group style="" tagname="tr">
								<xf:group class="w2tb_th" style="" tagname="th">종료일시</xf:group>
								<xf:group class="w2tb_td" style="" tagname="td">
									<w2:attributes>
										<w2:colspan>1</w2:colspan>
										<w2:rowspan>1</w2:rowspan>
									</w2:attributes>
									<w2:inputCalendar footerDiv="false" id="CLOSE_DTM" style="width:150px;height:23px;" renderDiv="true"
										focusOnDateSelect="false" calendarValueType="yearMonthDateTimeSec" rightAlign="false" renderType="component" ref="data:dlt_BRT_INCDNT_RES_INFO.CLOSE_DTM" readOnly="">
									</w2:inputCalendar>	
								</xf:group>
								<xf:group class="w2tb_th" style="" tagname="th">진행구분</xf:group>
								<xf:group class="w2tb_td" style="" tagname="td">
									<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-"
										direction="auto" disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" id="PROG_DIV" labelWidthAuto=""
										mandatory="true" optionOrder="" ref="data:dlt_BRT_INCDNT_RES_INFO.PROG_DIV" renderType="component"
										style="height:24px;width: 150px;" submenuSize="auto">
										<xf:choices></xf:choices>
									</xf:select1>
								</xf:group>
							</xf:group>
							<xf:group tagname="tr" style=""><xf:group tagname="th" class="w2tb_th">비상연락처<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
								<xf:group tagname="td" class="w2tb_td">
									<w2:attributes></w2:attributes>
									<xf:input adjustMaxLength="" class="" disabled="" ev:oneditenter=""
										ev:onfocus="scwin.CLSFCTN_NM_onfocus" fireEventOnInvalid="" id="CLSFCTN_NM" invalidMessageFunc="" mandatory="" maxlength=""
										readOnly="" ref="data:dlt_BRT_INCDNT_RES_INFO.CLSFCTN_NM" style="width:150px;height:21px;" validateOnCheckMaxByteLength=""
										validateOnInput="" validator="">
									</xf:input>
									<xf:image class="btn" ev:onclick="scwin.CLSFCTN_NM_SEARCH_onclick" id="CLSFCTN_NM_SEARCH" longdesc=""
										src="/cm/images/inc/icon_search.gif" style="width:21px;height:23px;margin-left:5px;">
									</xf:image>
								</xf:group>
								<xf:group tagname="th" class="w2tb_th">전화번호<w2:attributes><w2:scope>row</w2:scope></w2:attributes></xf:group>
								<xf:group tagname="td" class="w2tb_td">
									<w2:attributes></w2:attributes>
									<xf:input adjustMaxLength="" class="" disabled="true" ev:oneditenter="" ev:onfocus=""
										fireEventOnInvalid="" id="PHONE" invalidMessageFunc="" mandatory="" maxlength="" readOnly=""
										ref="data:dlt_BRT_INCDNT_RES_INFO.PHONE" style="width:150px;height:21px;" validateOnCheckMaxByteLength="" validateOnInput=""
										validator="">
									</xf:input>
								</xf:group></xf:group><xf:group style="" tagname="tr">
								<xf:group tagname="td" class="w2tb_th" id="">돌발대응유형<w2:attributes></w2:attributes></xf:group>
								<xf:group tagname="td" class="w2tb_td">
									<w2:attributes><w2:colspan>3</w2:colspan><w2:rowspan>1</w2:rowspan></w2:attributes>
									<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-"
										direction="auto" disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" id="INCDNT_RES_TYPE" labelWidthAuto=""
										mandatory="true" optionOrder="" ref="data:dlt_BRT_INCDNT_RES_INFO.INCDNT_RES_TYPE" renderType="component"
										style="height:24px;width: 150px;" submenuSize="auto">
										<xf:choices></xf:choices>
									</xf:select1>
								</xf:group>
							</xf:group><xf:group tagname="tr" style="">
								<xf:group tagname="th" class="w2tb_th" style="height: 24px;vertical-align: top;" id="" tabIndex="">돌발대응내용<w2:attributes>
										<w2:scope>row</w2:scope>
									</w2:attributes></xf:group>
								<xf:group tagname="td" class="w2tb_td">
									<w2:attributes>
										<w2:colspan>3</w2:colspan>
										<w2:rowspan>1</w2:rowspan>
									</w2:attributes>
									<xf:textarea adjustMaxLength="" class="" disabled="" id="REMARK" mandatory="" ref="data:dlt_BRT_INCDNT_RES_INFO.REMARK"
										style="width:100%;height: 70px;" maxlength="200">
									</xf:textarea>
								</xf:group>
							</xf:group>
						</xf:group>
					</xf:group>						
				</xf:group> <!--end pgm_detail-->
			</xf:group> <!-- end content --> 
		</xf:group> <!-- end container -->
	</body>
</html>
