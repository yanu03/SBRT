<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare"
	xmlns:xf="http://www.w3.org/2002/xforms">
	<head>
		<!-- 
		#####################################################################
		파일명 : SM0500M01.xml
		프로그램명 : 조직 관리 
		설 명 : 조직을 관리(등록,수정,삭제)하는 화면
		작성자 : Inswave Systems
		작성일 : 2016.10.24
		
		수정일자	  수정자			 수정내용
		=====================================================================
		2016.10.24	Inswave Systems	최초작성
		2018.01.26	Inswave Systems	WebSquare5 SP2 기능을 적용하도록 소스 업그레이드
		2018.11.12	Inswave Systems	WebSquare5 SP3 기능을 적용하도록 소스 업그레이드
		#####################################################################
		-->
		<w2:type>DEFAULT</w2:type>
		<w2:buildDate />
		<xf:model>
			<xf:instance>
				<data xmlns="" />
			</xf:instance>
			<w2:dataCollection baseNode="map">
				<w2:dataMap baseNode="map" id="dma_search">
					<w2:keyInfo>
						<w2:key id="CONTENT" name="name1" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
				<w2:dataList baseNode="list" repeatNode="map" id="dlt_BMS_VOC_ORGA_LIST" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="ORGA_ID" name="ORGA_ID" dataType="text"></w2:column>
						<w2:column id="VOC_ID" name="VOC_ID" dataType="text"></w2:column>
						<w2:column id="ORGA_NM" name="ORGA_NM" dataType="text"></w2:column>
						<w2:column id="ALL_PLAY_TM" name="ALL_PLAY_TM" dataType="text"></w2:column>
						<w2:column id="GPS_Y" name="GPS_Y" dataType="text"></w2:column>
						<w2:column id="GPS_X" name="GPS_X" dataType="text"></w2:column>
						<w2:column id="REMARK" name="REMARK" dataType="text"></w2:column>
					</w2:columnInfo>
					<w2:data></w2:data>
				</w2:dataList>
				<w2:dataList baseNode="list" repeatNode="map" id="dlt_BMS_ROUT_MST" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="ROUTE_ID" name="노선아이디" dataType="text"></w2:column>
						<w2:column id="REP_ROUT_ID" name="대표노선아이디" dataType="text"></w2:column>
						<w2:column id="REP_ROUT_NM" name="대표노선명" dataType="text"></w2:column>
						<w2:column id="ROUT_NM" name="노선명" dataType="text"></w2:column>
						<w2:column id="ROUT_TYPE" name="노선유형" dataType="text"></w2:column>
						<w2:column id="RSV_ROUT_YN" name="예비노선여부" dataType="text"></w2:column>
						<w2:column id="ST_STTN_ID" name="시작정류소아이디" dataType="text"></w2:column>
						<w2:column id="ST_STTN_NM" name="시작정류소명" dataType="text"></w2:column>
						<w2:column id="ST_STTN_ENM" name="시작정류소영문명" dataType="text"></w2:column>
						<w2:column id="ED_STTN_ID" name="종료정류소아이디" dataType="text"></w2:column>
						<w2:column id="ED_STTN_ENM" name="종료정류소영문명" dataType="text"></w2:column>
						<w2:column id="ED_STTN_NM" name="종료정류소명" dataType="text"></w2:column>
						<w2:column id="RET_STTN_ID" name="회차정류소아이디" dataType="text"></w2:column>
						<w2:column id="RET_STTN_NM" name="회차정류소명" dataType="text"></w2:column>
						<w2:column id="RET_STTN_ENM" name="회차정류소영문명" dataType="text"></w2:column>
						<w2:column id="STTN_CNT" name="정류소수" dataType="text"></w2:column>
						<w2:column id="ROUT_LEN" name="노선거리" dataType="text"></w2:column>
						<w2:column id="ROUT_STRT_LEN" name="노선직선거리" dataType="text"></w2:column>
						<w2:column id="CURVATURE" name="굴곡도" dataType="text"></w2:column>
						<w2:column id="JIT_DSPCH_YN" name="공동배차여부" dataType="text"></w2:column>
						<w2:column id="LIC_VHC_CNT" name="면허차대수" dataType="text"></w2:column>
						<w2:column id="SPR_VHC_CNT" name="예비차대수" dataType="text"></w2:column>
						<w2:column id="APPL_ST_DT" name="적용시작일" dataType="text"></w2:column>
						<w2:column id="APPL_ED_DT" name="적용종료일" dataType="text"></w2:column>
						<w2:column id="WAY_DIV" name="상하행구분" dataType="text"></w2:column>
						<w2:column id="USER_WAY_DIV" name="사용자상하행구분" dataType="text"></w2:column>
						<w2:column id="WAY_INFO" name="방면정보" dataType="text"></w2:column>
						<w2:column id="AREA" name="권역" dataType="text"></w2:column>
						<w2:column id="SHAPE_DIV" name="노선도모양구분" dataType="text"></w2:column>
						<w2:column id="USE_YN" name="사용여부" dataType="text"></w2:column>
						<w2:column id="REMARK" name="비고" dataType="text"></w2:column>
						<w2:column id="UPD_DTM" name="갱신일시" dataType="text"></w2:column>
						<w2:column id="UPD_ID" name="갱신아이디" dataType="text"></w2:column>
					</w2:columnInfo>
				</w2:dataList>
				<w2:dataMap baseNode="map" id="dma_search3">
					<w2:keyInfo>
						<w2:key id="ORGA_ID" name="ORGA_ID" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
                <w2:dataList baseNode="list" repeatNode="map" id="dlt_BMS_NODE_MST" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="NODE_ID" name="노드아이디" dataType="text"></w2:column>
						<w2:column id="MOCK_NODE_ID" name="표준노드아이디" dataType="text"></w2:column>
						<w2:column id="NODE_NM" name="노드명" dataType="text"></w2:column>
						<w2:column id="NODE_ENM" name="노드영문명" dataType="text"></w2:column>
						<w2:column id="NODE_TYPE" name="노드유형" dataType="text"></w2:column>
						<w2:column id="GPS_X" name="GPS_X좌표" dataType="text"></w2:column>
						<w2:column id="GPS_Y" name="GPS_Y좌표" dataType="text"></w2:column>
						<w2:column id="TM_X" name="TM_X좌표" dataType="text"></w2:column>
						<w2:column id="TM_Y" name="TM_Y좌표" dataType="text"></w2:column>
						<w2:column id="ENTRY_RECOG_RADS" name="진입인식반경" dataType="text"></w2:column>
						<w2:column id="ADVNC_RECOG_RADS" name="진출인식반경" dataType="text"></w2:column>
						<w2:column id="USE_YN" name="사용여부" dataType="text"></w2:column>
						<w2:column id="UPD_DTM" name="갱신일시" dataType="text"></w2:column>
						<w2:column id="UPD_ID" name="갱신아이디" dataType="text"></w2:column>
					</w2:columnInfo>
				</w2:dataList>
				<w2:dataMap baseNode="map" id="dma_search2">
					<w2:keyInfo>
						<w2:key id="ROUTE_ID" name="ROUTE_ID" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
			</w2:dataCollection>
			<w2:workflowCollection></w2:workflowCollection>
			<xf:submission id="sub_PI0202G0R0" ref="data:json,dma_search" target="data:json,dlt_BMS_ROUT_MST" action="/pi/PI0202G0R0"
				method="post" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
				processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_PI0202G1R0" ref="data:json,dma_search2" target="data:json,dlt_BMS_NODE_MST" action="/pi/PI0202G1R0" method="post" mediatype="application/json"
				encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone=""
				ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_PI0202G2R0" ref="data:json,dma_search3" target="data:json,dlt_BMS_VOC_ORGA_LIST" action="/pi/PI0202G2R0"
				method="post" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
				processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
		</xf:model>
		<script type="text/javascript" lazy="false"><![CDATA[
	scwin.onpageload = function() {
		$p.executeSubmission(sub_PI0202G0R0);
		
		var autoOptions = {
			Main : { grid : PI0202G0, srchSbm : sub_PI0202G0R0 }
		};
		com.setMainBtn2(wfm_mainBtn, gcm.DISP_TYPE.DUAL_GRID, autoOptions);		
	};
	
	scwin.dateDisFormatter = function(data){
		if (data == "") return "";
		return data.substring(0,4) + "-" + data.substring(4,6) + "-" + data.substring(6,8) + " " + data.substring(8,10) + ":" + data.substring(10,12);
	}
	
	
	scwin.PI0202G0_onrowindexchange = function(row, oldRow) {
		dma_search2.set("ROUTE_ID", dlt_BMS_ROUT_MST.getCellData(row, "ROUTE_ID"));
		//dma_search3.set("ROUTE_ID", dlt_BMS_ROUT_MST.getCellData(row, "ROUTE_ID"));
		$p.executeSubmission(sub_PI0202G1R0)
		//$p.executeSubmission(sub_PI0202G2R0)        
	};	
	]]></script>
	</head>
	<body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">
		<xf:group class="pgm_container grdr_41_36_a" id="pgm_container" style="">
			<xf:group id="pgm_navi" class="pgm_navi" style="">
				<w2:wframe id="wfm_navi" style="" src="/cm/common/wf_navi.xml" scope="true"></w2:wframe>
			</xf:group>
			<xf:group id="pgm_header" style="" class="pgm_header">
				<xf:group class="gr_search" id="" style="">
					<xf:group class="label" id="" style="">
						<xf:group class="" id="" style="">
							<w2:span class="" id="" label="검색 항목"></w2:span>
						</xf:group>
					</xf:group>
					<xf:group class="search" id="" style="">
						<w2:autoComplete allOption="" caseSensitive="false" chooseOption="true" chooseOptionLabel="-전체-"
							chooseOptionValue="" displayMode="label" editType="select" emptyItem="" emptyValue="" ev:onchange="" ev:onviewchange=""
							id="acb_autoChoiceBox" interactionMode="" noResult="useData" ref="data:dma_BMS_NOTICE_MST.SContent" search="start" selectedData=""
							style="width: 200px;height: 21px;float: left;" submenuSize="auto" textAlign="left" useKeywordHighlight="false" visibleRowNum="">
							<w2:choices>
								<w2:itemset nodeset="data:dlt_grgSearchItem">
									<w2:label ref="GRG_ID"></w2:label>
									<w2:value ref="GRG_ID"></w2:value>
								</w2:itemset>
							</w2:choices>
						</w2:autoComplete>
					</xf:group>
					<w2:wframe id="wfm_mainBtn" class="" style="" src="/cm/common/wf_mainBtn.xml" scope="true"></w2:wframe>
				</xf:group>
			</xf:group>
			
			<xf:group id="pgm_content" style="" class="pgm_content grdc_400_20_a_20_400">
				<xf:group id="pgm_list" style="" class="pgm_list grdr_20_200_20_a">
					<xf:group id="" style="" class="defaultbox">
						<w2:textbox id="" style="" class="df_tt fl" label="노선 목록"></w2:textbox>
					</xf:group>
					<xf:group id="">
						<w2:gridView sortEvent="onclick" ev:oncellclick=""
							showSortableImage="" rowNumVisible="true" useShiftKey="true" readOnly="" scrollByColumn="false" rowNumHeaderValue="순서" sortable="true"
							rowStatusHeaderValue="상태" adaptive="crosstab" overflowX="auto" overflowY="scroll" rowStatusVisible="false"
							fixedColumnWithHidden="true" dataList="data:dlt_BMS_ROUT_MST" ignoreCellClick="false" style="height:100%;" autoFit="lastColumn"
							visibleRowNum="" id="PI0202G0" class="cm_grid" tooltipPositionY="" ev:onrowindexchange="scwin.PI0202G0_onrowindexchange">
							<w2:header style="" id="header1">
								<w2:row style="" id="row2">
									<w2:column width="118" style="height:25px;" inputType="text" id="column9" value="노선ID" blockSelect="false"
										displayMode="label" userData1="" userData2="">
									</w2:column>
									<w2:column width="159" style="height:25px;" inputType="text" id="column17" value="노선명" blockSelect="false"
										displayMode="label" userData1="">
									</w2:column>
									<w2:column width="80" style="height:25px;" inputType="text" id="column11" value="관리노선명" blockSelect="false"
										displayMode="label" userData1="">
									</w2:column>
									<w2:column width="126" style="height:25px;" inputType="text" id="column30" value="시작정류장"
										blockSelect="false">
									</w2:column>
									<w2:column width="126" style="height:25px;" inputType="text" id="column6" value="종료정류장"
										blockSelect="false" hidden="">
									</w2:column>									
									<w2:column removeBorderStyle="false" width="163" inputType="text" style="height:25px" id="column31"
										value="상하행" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column width="116" style="height:25px;" inputType="text" id="column28" value="상하행(사용자)"
										blockSelect="false">
									</w2:column>
									<w2:column removeBorderStyle="false" width="108" inputType="text" style="height:25px" id="column39"
										value="업데이트 일시" blockSelect="false" displayMode="label">
									</w2:column>
								</w2:row>
							</w2:header>
							<w2:gBody width="40" style="" id="gBody4">
								<w2:row style="" id="row5">
									<w2:column width="118" style="height:25px;" inputType="text" id="ROUTE_ID" blockSelect="false"
										displayMode="label" readOnly="true" userData1="M" userData2="">
									</w2:column>
									<w2:column width="159" style="height:25px;" inputType="text" id="REP_ROUT_NM" blockSelect="false"
										displayMode="label" readOnly="true" userData1="M">
									</w2:column>
									<w2:column textAlign="center" width="80" style="height:25px;" inputType="text" id="ROUT_NM"
										blockSelect="false" displayMode="label" readOnly="true" userData1="">
									</w2:column>
									<w2:column width="126" style="height:25px;" inputType="text" id="ST_STTN_NM" blockSelect="false" readOnly="true">
									</w2:column>
									<w2:column width="126" style="height:25px;" inputType="text" id="ED_STTN_NM" blockSelect="false" readOnly="true">
									</w2:column>									
									<w2:column removeBorderStyle="false" width="163" inputType="text" style="height:25px" id="WAY_DIV" value=""
										blockSelect="false" displayMode="label" readOnly="true">
									</w2:column>
									<w2:column removeBorderStyle="false" width="116" inputType="text" style="height:25px" id="USER_WAY_DIV" value=""
										blockSelect="false" displayMode="label" readOnly="true" displayFormatter="">
									</w2:column>
									<w2:column removeBorderStyle="false" width="108" inputType="text" style="height:25px" id="UPD_DTM" value=""
										blockSelect="false" displayMode="label" displayFormatter="scwin.dateDisFormatter">
									</w2:column>
								</w2:row>
							</w2:gBody>
							<w2:footer style="" id="footer1">
								<w2:row style="" id="row3">
									<w2:column removeBorderStyle="false" width="" inputType="expression" style="height:20px; border-right:5px" id="column48" value=""
										blockSelect="false" displayMode="label" colSpan="13" rowSpan="" expression="&quot;데이터 개수 : &quot; + COUNT('GRG_ID')"
										textAlign="left">
									</w2:column>
								</w2:row>
							</w2:footer>
						</w2:gridView>
					</xf:group>
					<xf:group id="" style="" class="defaultbox">
						<w2:textbox id="" style="" class="df_tt fl" label="노선 내 지점 목록"></w2:textbox>
					</xf:group>
					
					<xf:group id="">
						<w2:gridView sortEvent="onclick" ev:oncellclick=""
							showSortableImage="" rowNumVisible="true" useShiftKey="true" readOnly="" scrollByColumn="false" rowNumHeaderValue="순서" sortable="true"
							rowStatusHeaderValue="상태" adaptive="crosstab" overflowX="auto" overflowY="scroll" rowStatusVisible="false"
							fixedColumnWithHidden="true" dataList="data:dlt_BMS_NODE_MST" ignoreCellClick="false" style="height:100%;" autoFit="lastColumn"
							visibleRowNum="" id="PI0202G1" class="cm_grid" tooltipPositionY="">
							<w2:header style="" id="header1">
								<w2:row style="" id="row2">
									<w2:column width="118" style="height:25px;" inputType="text" id="column9" value="지점ID" blockSelect="false"
										displayMode="label" userData1="" userData2="">
									</w2:column>
									<w2:column width="159" style="height:25px;" inputType="text" id="column17" value="지점이름" blockSelect="false"
										displayMode="label" userData1="">
									</w2:column>
									<w2:column width="80" style="height:25px;" inputType="text" id="column11" value="지점유형" blockSelect="false"
										displayMode="label" userData1="">
									</w2:column>
									<w2:column width="126" style="height:25px;" inputType="text" id="column30" value="위도"
										blockSelect="false">
									</w2:column>
									<w2:column removeBorderStyle="false" width="163" inputType="text" style="height:25px" id="column31"
										value="경도" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="84" inputType="text" style="height:25px" id="column41"
										value="업데이트 일시" blockSelect="false" displayMode="label">
									</w2:column>
								</w2:row>
							</w2:header>
							<w2:gBody width="40" style="" id="gBody4">
								<w2:row style="" id="row5">
                                    <w2:column width="118" style="height:25px;" inputType="text" id="NODE_ID" blockSelect="false"
										displayMode="label" readOnly="true" userData1="M" userData2="">
									</w2:column>
									<w2:column width="159" style="height:25px;" inputType="text" id="NODE_NM" blockSelect="false"
										displayMode="label" readOnly="true" userData1="M">
									</w2:column>
									<w2:column textAlign="center" width="80" style="height:25px;" inputType="text" id="NODE_TYPE"
										blockSelect="false" displayMode="label" readOnly="true" userData1="">
									</w2:column>
									<w2:column width="126" style="height:25px;" inputType="text" id="GPS_Y" blockSelect="false"
										displayFormat="" applyFormat="" displayMode="" readOnly="true">
									</w2:column>
									<w2:column removeBorderStyle="false" width="84" inputType="text" style="height:25px" id="GPS_X" value=""
										blockSelect="false" displayMode="label" autoFitFilterList="">
									</w2:column>									
									<w2:column removeBorderStyle="false" width="163" inputType="text" style="height:25px" id="UPD_DTM" value=""
										blockSelect="false" displayMode="label" readOnly="true" displayFormatter="scwin.dateDisFormatter">
									</w2:column>
								</w2:row>
							</w2:gBody>
							<w2:footer style="" id="footer1">
								<w2:row style="" id="row3">
									<w2:column removeBorderStyle="false" width="" inputType="expression" style="height:20px; border-right:5px" id="column48" value=""
										blockSelect="false" displayMode="label" colSpan="13" rowSpan="" expression="&quot;데이터 개수 : &quot; + COUNT('GRG_ID')"
										textAlign="left">
									</w2:column>
								</w2:row>
							</w2:footer>
						</w2:gridView>
					</xf:group>
				</xf:group>
				
				<xf:group id="" style="" class="vertical_line"></xf:group>
				
				<xf:group class="pgm_detail">
					<xf:group id="" style="" class="defaultbox">
						<w2:textbox id="" style="" class="df_tt fl" label="지도"></w2:textbox>
					</xf:group>
				</xf:group>
				
				<xf:group id="" style="" class="vertical_line"></xf:group>				
				
				<xf:group class="pgm_detail grdr_20_2_a">
					<xf:group id="" style="" class="defaultbox">
						<w2:textbox id="" style="" class="df_tt fl" label="음성 편성 목록"></w2:textbox>
					</xf:group>
					<xf:group id="">
						<w2:gridView sortEvent="onclick" ev:onrowindexchange="scwin.PI0202G2_onrowindexchange" ev:oncellclick=""
							showSortableImage="" rowNumVisible="true" useShiftKey="true" readOnly="" scrollByColumn="false" rowNumHeaderValue="순서" sortable="true"
							rowStatusHeaderValue="상태" adaptive="crosstab" overflowX="auto" overflowY="scroll" rowStatusVisible="false"
							fixedColumnWithHidden="true" dataList="" ignoreCellClick="false" style="height:100%;" autoFit="lastColumn"
							visibleRowNum="" id="PI0202G2" class="cm_grid" tooltipPositionY="">
							<w2:header style="" id="header1">
								<w2:row style="" id="row2">
									<w2:column width="118" style="height:25px;" inputType="text" id="column9" value="편성ID" blockSelect="false"
										displayMode="label" userData1="" userData2="">
									</w2:column>
									<w2:column width="159" style="height:25px;" inputType="text" id="column17" value="편성명" blockSelect="false"
										displayMode="label" userData1="">
									</w2:column>
									<w2:column width="80" style="height:25px;" inputType="text" id="column11" value="총재생시간" blockSelect="false"
										displayMode="label" userData1="">
									</w2:column>
									<w2:column width="126" style="height:25px;" inputType="text" id="column30" value="위도"
										blockSelect="false">
									</w2:column>
									<w2:column removeBorderStyle="false" width="163" inputType="text" style="height:25px" id="column31"
										value="경도" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="84" inputType="text" style="height:25px" id="column41"
										value="비고" blockSelect="false" displayMode="label">
									</w2:column>
								</w2:row>
							</w2:header>
							<w2:gBody width="40" style="" id="gBody4">
								<w2:row style="" id="row5">
									<w2:column width="118" style="height:25px;" inputType="text" id="VOC_ID" blockSelect="false"
										displayMode="label" readOnly="true" userData1="M" userData2="">
									</w2:column>
									<w2:column width="159" style="height:25px;" inputType="text" id="VOC_NM" blockSelect="false"
										displayMode="label" readOnly="true" userData1="M">
									</w2:column>
									<w2:column removeBorderStyle="false" width="163" inputType="text" style="height:25px" id="PLAY_DATE" value=""
										blockSelect="false" displayMode="label" readOnly="true" displayFormatter="scwin.playDateDisFormatter">
									</w2:column>
									<w2:column removeBorderStyle="false" width="116" inputType="text" style="height:25px" id="SCR_TXT" value=""
										blockSelect="false" displayMode="label" readOnly="true" displayFormatter="">
									</w2:column>
									<w2:column removeBorderStyle="false" width="108" inputType="text" style="height:25px" id="" value=""
										blockSelect="false" displayMode="label" displayFormatter="">
									</w2:column>
									<w2:column removeBorderStyle="false" width="84" inputType="text" style="height:25px" id="REMARK" value=""
										blockSelect="false" displayMode="label" autoFitFilterList="">
									</w2:column>
								</w2:row>
							</w2:gBody>
							<w2:footer style="" id="footer1">
								<w2:row style="" id="row3">
									<w2:column removeBorderStyle="false" width="" inputType="expression" style="height:20px; border-right:5px" id="column48" value=""
										blockSelect="false" displayMode="label" colSpan="13" rowSpan="" expression="&quot;데이터 개수 : &quot; + COUNT('GRG_ID')"
										textAlign="left">
									</w2:column>
								</w2:row>
							</w2:footer>
						</w2:gridView>
					</xf:group>					
				</xf:group>
			</xf:group>
			
		</xf:group> <!-- container end -->
	</body>
</html>