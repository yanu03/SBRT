<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare"
	xmlns:xf="http://www.w3.org/2002/xforms">
	<head meta_vertical_guides="149" meta_horizontal_guides="">
		<w2:type>DEFAULT</w2:type>
		<w2:buildDate />
		<xf:model>
			<xf:instance>
				<data xmlns="" />
			</xf:instance>
			<w2:dataCollection baseNode="map">
				<w2:dataMap baseNode="map" id="dma_result" ev:onmodelchange="">
					<w2:keyInfo>
						<w2:key id="STATUS" name="STATUS" dataType="text"></w2:key>
						<w2:key id="ICNT" name="입력건수" dataType="text"></w2:key>
						<w2:key id="UCNT" name="수정건수" dataType="text"></w2:key>
						<w2:key id="DCNT" name="삭제건수" dataType="text"></w2:key>
						<w2:key id="TYPE" name="TYPE" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
				<w2:dataList baseNode="list" repeatNode="map" id="dlt_searchitem" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="ROUTE_ID" name="노선ID" dataType="text"></w2:column>
						<w2:column id="ROUT_NM" name="노선명" dataType="text"></w2:column>
					</w2:columnInfo>
				</w2:dataList>
				<w2:dataList baseNode="list" repeatNode="map" id="dlt_ROUT_MST" saveRemovedData="true">
					<w2:columnInfo>
						<w2:column id="ROUTE_ID" name="노선ID" dataType="text"></w2:column>
						<w2:column id="ROUT_NM" name="노선명" dataType="text"></w2:column>
						<w2:column id="WAY_DIV" name="상하행구분" dataType="text"></w2:column>
						<w2:column id="ST_STTN_ID" name="시작정류소ID" dataType="text"></w2:column>
						<w2:column id="ST_STTN_NM" name="시작정류소명" dataType="date"></w2:column>
						<w2:column id="ED_STTN_ID" name="종료정류소ID" dataType="text"></w2:column>
						<w2:column id="ED_STTN_NM" name="종료정류소명" dataType="number" defaultValue="0"></w2:column>
						<w2:column id="REMARK" name="비고" dataType="text"></w2:column>
						<w2:column id="FILE_NM" name="파일명" dataType="text"></w2:column>
						<w2:column id="FILE_PATH" name="파일경로" dataType="text"></w2:column>

					</w2:columnInfo>
				</w2:dataList>
				<w2:dataMap baseNode="map" id="dma_search">
					<w2:keyInfo>
						<w2:key id="TYPE" name="name1" dataType="text"></w2:key>
						<w2:key id="CONTENT" name="name2" dataType="text"></w2:key>
						<w2:key id="USE_YN" name="name3" dataType="text"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
			</w2:dataCollection>
			<w2:workflowCollection></w2:workflowCollection>
			<xf:submission id="sub_PI0701G0R0" ref="data:json,dma_search" target="data:json,dlt_ROUT_MST" action='/pi/PI0701G0R0' method="post" mediatype="application/json" encoding="UTF-8"
				instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="조회 중입니다..." ev:submit="" ev:submitdone="scwin.sub_PI0701G0R0_submitdone"
				ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_PI0701G0S0" ref="data:json,dlt_ROUT_MST" target="data:json,dma_result" action="/pi/PI0701G0S0" method="post" mediatype="application/json" encoding="UTF-8"
				instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="저장 중입니다..." ev:submit="" ev:submitdone="scwin.sub_PI0701G0S0_submitdone"
				ev:submiterror="" abortTrigger="">
			</xf:submission>
			<xf:submission id="sub_PI0701SHI0" ref="" target="data:json,dlt_searchitem" action="/pi/PI0701SHI0" method="post" mediatype="application/json" encoding="UTF-8"
				instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone=""
				ev:submiterror="" abortTrigger="">
			</xf:submission>
		</xf:model>

	<script type="text/javascript" lazy="false"><![CDATA[
	scwin.onpageload = function() {
		var autoOptions = {
			Main : { grid : PI0701G0, frm : PI0701F0, srchSbm : sub_PI0701G0R0, savSbm : sub_PI0701G0S0, 
					srchGrp : pgm_header, keyColumn : "ROUTE_ID", focusColumn : "ROUT_NM", name : "노선 목록"}
		 };		
	
		var codeOptions = [ {code : "WAY_DIV", compID : "PI0701G0:WAY_DIV" }
						];		
						
		com.setMainBtn2(wfm_mainBtn, gcm.DISP_TYPE.SINGLE_GRID_FORM, autoOptions);	
		
		com.setCommonDtl(codeOptions, function() {
			com.searchGrid(PI0701G0, sub_PI0701G0R0);
		});
		
		com.executeSubmission(sub_PI0701SHI0);		
	};

	scwin.onpageunload = function() {

	};
	
	scwin.sub_PI0701G0R0_submitdone = function(e) {
	};
	
	scwin.sub_PI0701G0S0_submitdone = function(e) {
	};
	
	/*scwin.btn_upload_onclick = function() {
	};	
	
	scwin.uploadFileCallback = function(returnValue) {

	};*/
	
	scwin.upload0_onInputValueChange = function(returnValue){
	
		var fileNameIndex = returnValue.lastIndexOf('\\');
		var real_fileName = returnValue.substring(fileNameIndex+1, returnValue.length);
		
		dlt_ROUT_MST.setCellData(PI0701G0.getFocusedRowIndex(), "FILE_NM", real_fileName);
		
		btn_upload.submit();
		
	}
	
	scwin.upload0_ondone = function(retXml) {
		var fileType = dlt_ROUT_MST.getCellData(PI0701G0.getFocusedRowIndex(), "FILE_TYPE");
		var real_fileName = dlt_ROUT_MST.getCellData(PI0701G0.getFocusedRowIndex(), "FILE_NM");
		var src = "/fileUpload/up/" + real_fileName; 
		
		if (fileType == "FT001"){
			var obj_video = document.getElementById("video1");
			obj_video.addEventListener('loadedmetadata', function() {
				var duration = parseInt(obj_video.duration);
				dlt_ROUT_MST.setCellData(PI0701G0.getFocusedRowIndex(), "PLAY_TM", duration);
			});			
			$p.$("#video1").attr("src", src);
		} else if (fileType == "FT002") {
			$p.$("#image1").attr("src", src);
		}			
		
	};
	
	
	scwin.PI0701G0_onrowindexchange = function(row,oldRow) {
				
	};
	
	scwin.sbx_ChoiceBox_onviewchange = function(info) {
		if (info.newValue == "ALL") {
			autoChoiceBox.hide();
			search_input.setValue("");
			search_input.show("");
		} 
		else if (info.newValue == "ROUTE_ID") {
			search_input.hide();
			autoChoiceBox.setNodeSet("data:dlt_searchitem", "ROUTE_ID", "ROUTE_ID");
			autoChoiceBox.show("");
		}
		else if (info.newValue == "ROUT_NM") {
			search_input.hide();
			autoChoiceBox.setNodeSet("data:dlt_searchitem", "ROUT_NM", "ROUT_NM");
			autoChoiceBox.show("");
		} 		
	};
	]]></script>
	</head>
	<body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">
		<xf:group id="pgm_container" class="pgm_container grdr_41_36_a" style="">
			<xf:group id="pgm_navi" class="pgm_navi" style="">
				<w2:wframe id="wfm_navi" style="" src="/cm/common/wf_navi.xml" scope="true"></w2:wframe>
			</xf:group>
			<xf:group id="pgm_header" class="pgm_header" style="">
				<xf:group id="" style="" class="gr_search">
					<xf:group id="" style="" class="label">
							<w2:span id="" class="" label="검색 항목"></w2:span>
					</xf:group>
					<xf:group id="" style="" class="search">
						<xf:select1 allOption="" appearance="minimal" chooseOption="" direction="auto" disabled="false"
							ev:onviewchange="scwin.sbx_ChoiceBox_onviewchange" disabledClass="w2selectbox_disabled" displayMode="label" id="sbx_ChoiceBox"
							optionOrder="false" ref="data:dma_search.TYPE" class="search_item" style="" submenuSize="auto"
							textAlign="left">
							<xf:choices>
								<xf:item>
									<xf:label><![CDATA[전체]]></xf:label>
									<xf:value><![CDATA[ALL]]></xf:value>
								</xf:item>
								<xf:item>
									<xf:label><![CDATA[노선ID]]></xf:label>
									<xf:value><![CDATA[ROUTE_ID]]></xf:value>
								</xf:item>
								<xf:item>
									<xf:label><![CDATA[노선명]]></xf:label>
									<xf:value><![CDATA[ROUT_NM]]></xf:value>
								</xf:item>
							</xf:choices>
						</xf:select1>
						<xf:input id="search_input" class="search_input" ref="data:dma_search.CONTENT" placeholder="노선ID 또는 노선명"></xf:input>
						<w2:autoComplete allOption="" caseSensitive="false" chooseOption="true" chooseOptionLabel="-전체-"
							chooseOptionValue="" displayMode="label" editType="select" emptyItem="" emptyValue="" ev:onchange="" ev:onviewchange=""
							id="autoChoiceBox" interactionMode="" noResult="useData" ref="data:dma_search.CONTENT" search="start" selectedData=""
							class="search_auto" style="display:none" submenuSize="auto" textAlign="left" useKeywordHighlight="false" visibleRowNum="">
							<w2:choices>
								<w2:itemset nodeset="data:dlt_searchitem">
									<w2:label ref="ROUT_NM"></w2:label>
									<w2:value ref="ROUT_ID"></w2:value>
								</w2:itemset>
							</w2:choices>
						</w2:autoComplete>
					</xf:group>
					<w2:wframe id="wfm_mainBtn" class="" style="" src="/cm/common/wf_mainBtn.xml" scope="true"></w2:wframe>
				</xf:group>
			</xf:group><!-- pgm_header -->
			<xf:group id="pgm_content" class="pgm_content grdc_a_20_700" style="">
				<xf:group id="pgm_list" class="pgm_list grdr_20_2_a" style="">
					<xf:group id="" class="" style="">
						<xf:group class="defaultbox" id="" style="">
							<w2:textbox class="df_tt fl" id="" label="노선 목록" style=""></w2:textbox>
						</xf:group>
					</xf:group>
					<xf:group></xf:group>
					<xf:group id="" class="" style="">
						<w2:gridView alwaysTriggerScrollStart="" autoFit="lastColumn" captionTitle="" class="cm_grid left"
							dataList="data:dlt_ROUT_MST" enterKeyMove="" ev:onafteredit="" ev:oncellclick="" ev:oneditkeyup="" ev:onkeyup=""
							ev:onrowindexchange="scwin.PI0701G0_onrowindexchange" ev:ontextimageclick="" ev:onviewchange="" fixedColumnWithHidden="true"
							id="PI0701G0" ignoreCellClick="false" nextTabID="" rowNumHeaderValue="순번" rowNumVisible="true" rowStatusHeaderValue=""
							rowStatusVisible="false" rowStatusWidth="40" scrollByColumn="false" style="" useShiftKey="true" visibleRowNum="" wheelRows=""
							autoFitMinWidth="0" disabledScrollHidden="" editModeEvent="" editModeEventIcon="" checkEditableInputClass="" keyMoveEditMode=""
							moveKeyEditMode="" moveKeyEditModeAll="" ignoreNonEditableCellTabEnter="" readOnly="true" keepDefaultColumnWidth=""
							oddEvenColorDisplay="" rowNumWidth="" summaryAuto="" excludeDeletedRows="" useCtrlOnMultisort="" useFilterList=""
							useFilterListSync="" sortedIconPosition="" sortable="" sortOrderReverse="" showSortableUseFilter="" focusMode="row"
							rowNumStatusUniqueId="" rowNumStatusResize="" ev:onbeforecolumnmove="" userData1="">
							<w2:caption style="" id="caption1" value="this is a grid caption."></w2:caption>
							<w2:header style="" id="header1">
								<w2:row style="" id="row1">
									<w2:column removeBorderStyle="false" width="104" inputType="text" style="height:20px" id="column10"
										value="노선ID" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="95" inputType="text" style="height:20px" id="column9"
										value="노선명" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column8"
										value="상하행구분" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="123" inputType="text" style="height:20px" id="column6"
										value="시작정류소명" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="98" inputType="text" style="height:20px" id="column4"
										value="종료정류소명" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column3"
										value="비고" blockSelect="false" displayMode="label">
									</w2:column>
								</w2:row>
							</w2:header>
							<w2:gBody style="" id="gBody1">
								<w2:row style="" id="row2">
									<w2:column removeBorderStyle="false" width="104" inputType="text" style="height:20px" id="ROUTE_ID"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="95" inputType="text" style="height:20px" id="ROUT_NM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="select" style="height:20px" id="WAY_DIV"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="123" inputType="text" style="height:20px" id="ST_STTN_NM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="98" inputType="text" style="height:20px" id="ED_STTN_NM"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
									<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="REMARK"
										value="" blockSelect="false" displayMode="label">
									</w2:column>
								</w2:row>
							</w2:gBody>
							<w2:footer style="" id="footer1">
								<w2:row style="" id="row3">
									<w2:column removeBorderStyle="false" width="NaN" inputType="expression" style="height:20px;" id="column42"
										value="" blockSelect="false" displayMode="label" colSpan="15" rowSpan="" expression="&quot;데이터 개수 : &quot; + COUNT('COMP_ID')"
										textAlign="left">
									</w2:column>
								</w2:row>
							</w2:footer>							
						</w2:gridView>
					</xf:group>
				</xf:group><!-- pgm_list -->
				
				<xf:group id="" class="vertical_line">
				</xf:group>
				<xf:group id="pgm_detail" class="pgm_detail grdr_20_2_a" style="">
					<xf:group id="" class="gr_sub_header" style="">
						<xf:group class="defaultbox" id="" style="">
							<w2:textbox class="df_tt fl" id="" label="편성 정보" style=""></w2:textbox>
						</xf:group>
					</xf:group>
					<xf:group></xf:group>
					<xf:group class="" id="" style="">
						<xf:group class="w2tb tb" id="PI0701F0" style="width:100%;" tagname="table">
							<w2:attributes>
								<w2:summary></w2:summary>
							</w2:attributes>
							<xf:group tagname="colgroup">
								<xf:group style="width:90px;" tagname="col"></xf:group>
								<xf:group style="width:120px;" tagname="col"></xf:group>
								<xf:group style="width:90px;" tagname="col"></xf:group>
								<xf:group style="width:120px;" tagname="col"></xf:group>
							</xf:group>
							<xf:group style="" tagname="tr">
								<xf:group class="w2tb_th req" style="" tagname="th">장치유형</xf:group>
								<xf:group class="w2tb_td" style="" tagname="td">
									<w2:attributes>
										<w2:colspan>3</w2:colspan>
										<w2:rowspan>1</w2:rowspan>
									</w2:attributes>
									<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel=" " direction="auto"
										disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" ev:onchange="scwin.FILE_TYPE_onchange" id="ED_STTN_ID"
										labelWidthAuto="" mandatory="true" optionOrder="" ref="" renderType="component" style="width:30%;height:24px;"
										submenuSize="auto">
										<xf:choices></xf:choices>
									</xf:select1>
								</xf:group>
							</xf:group>
							<xf:group style="" tagname="tr">
								<xf:group class="w2tb_th req" style="" tagname="th">파일선택</xf:group>
								<xf:group class="w2tb_td" style="" tagname="td">
									<w2:attributes>
										<w2:colspan>3</w2:colspan>
										<w2:rowspan>1</w2:rowspan>
									</w2:attributes>
									<!--  <w2:anchor class="btn_com" ev:onclick="scwin.btn_upload_onclick" id="btn_upload" outerDiv="" style="">
										<xf:label><![CDATA[파일 선택]]></xf:label>
									</w2:anchor>-->
									<w2:upload imageStyle="position:absolute;vertical-align:middle;word-wrap:break-word"
										inputStyle="vertical-align:middle;word-wrap:break-word" style="width: 100%;height: 23px;" id="btn_upload" inputClass=""
										ev:onInputValueChange="scwin.upload0_onInputValueChange" ev:ondone="scwin.upload0_ondone" accept=".png,.avi,.mp4,jpg" title="" type=""
										disabled="false" class="">
									</w2:upload>
								</xf:group>
							</xf:group>
							<xf:group style="" tagname="tr">
								<xf:group class="w2tb_th" style="height: 100px;" tagname="th">동작설정</xf:group>
								<xf:group class="w2tb_td" style="" tagname="td">
									<w2:attributes>
										<w2:colspan>3</w2:colspan>
										<w2:rowspan>1</w2:rowspan>
									</w2:attributes>
									<w2:gridView alwaysTriggerScrollStart="" autoFit="lastColumn" captionTitle="" class="cm_grid inner"
									dataList="" enterKeyMove="" ev:onafteredit="" ev:oncellclick="" ev:oneditkeyup="" ev:onkeyup=""
									ev:onrowindexchange="" ev:ontextimageclick="" ev:onviewchange="" fixedColumnWithHidden="true"
									id="PI0701G1" ignoreCellClick="false" nextTabID="" rowNumHeaderValue="순번" rowNumVisible="true" rowStatusHeaderValue=""
									rowStatusVisible="false" rowStatusWidth="40" scrollByColumn="false" style="" useShiftKey="true" visibleRowNum="" wheelRows=""
									autoFitMinWidth="0" disabledScrollHidden="" editModeEvent="" editModeEventIcon="" checkEditableInputClass="" keyMoveEditMode=""
									moveKeyEditMode="" moveKeyEditModeAll="" ignoreNonEditableCellTabEnter="" readOnly="true" keepDefaultColumnWidth=""
									oddEvenColorDisplay="" rowNumWidth="" summaryAuto="" excludeDeletedRows="" useCtrlOnMultisort="" useFilterList=""
									useFilterListSync="" sortedIconPosition="" sortable="" sortOrderReverse="" showSortableUseFilter="" focusMode="row"
									rowNumStatusUniqueId="" rowNumStatusResize="" ev:onbeforecolumnmove="" userData1="">
									<w2:caption style="" id="caption1" value="this is a grid caption."></w2:caption>
									<w2:header style="" id="header1">
										<w2:row style="" id="row1">
											<w2:column removeBorderStyle="false" width="104" inputType="text" style="height:20px" id="column10"
												value="프레임번호" blockSelect="false" displayMode="label">
											</w2:column>
											<w2:column removeBorderStyle="false" width="95" inputType="text" style="height:20px" id="column9"
												value="효과" blockSelect="false" displayMode="label">
											</w2:column>
											<w2:column removeBorderStyle="false" width="70" inputType="text" style="height:20px" id="column8"
												value="효과속도" blockSelect="false" displayMode="label">
											</w2:column>
											<w2:column removeBorderStyle="false" width="123" inputType="text" style="height:20px" id="column6"
												value="표출시간" blockSelect="false" displayMode="label">
											</w2:column>
										</w2:row>
									</w2:header>
									<w2:gBody style="" id="gBody1">
										<w2:row style="" id="row2">
											<w2:column removeBorderStyle="false" width="104" inputType="text" style="height:20px" id="template1"
												value="" blockSelect="false" displayMode="label">
											</w2:column>
											<w2:column removeBorderStyle="false" width="95" inputType="text" style="height:20px" id="template2"
												value="" blockSelect="false" displayMode="label">
											</w2:column>
											<w2:column removeBorderStyle="false" width="70" inputType="select" style="height:20px" id="template3"
												value="" blockSelect="false" displayMode="label">
											</w2:column>
											<w2:column removeBorderStyle="false" width="123" inputType="text" style="height:20px" id="template4"
												value="" blockSelect="false" displayMode="label">
											</w2:column>
										</w2:row>
									</w2:gBody>
									<w2:footer style="" id="footer1">
										<w2:row style="" id="row3">
											<w2:column removeBorderStyle="false" width="NaN" inputType="expression" style="height:20px;" id="column42"
												value="" blockSelect="false" displayMode="label" colSpan="15" rowSpan="" expression="&quot;데이터 개수 : &quot; + COUNT('COMP_ID')"
												textAlign="left">
											</w2:column>
										</w2:row>
									</w2:footer>							
								</w2:gridView>									
								</xf:group>
							</xf:group>
							<xf:group style="" tagname="tr">
								<xf:group class="w2tb_th" style="height: 70px" tagname="th">미리보기</xf:group>
								<xf:group class="w2tb_td" style="" tagname="td">
									<w2:attributes>
										<w2:colspan>3</w2:colspan>
										<w2:rowspan>1</w2:rowspan>
									</w2:attributes>
									<xf:group id="preview" style="">
										<xf:image id="image1" ref="data:dlt_ROUT_MST.FILE_PATH" src=""
											style="width:150px;height:150px;margin-left:2px;margin-bottom:3px;float:left;">
										</xf:image>									    
									</xf:group>    
								</xf:group>
							</xf:group>
						</xf:group>
					</xf:group>
				</xf:group><!-- pgm_detail -->
			</xf:group>
		</xf:group>
	</body>
</html>
